



<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copiar al portapapeles">
      
        <meta name="lang:clipboard.copied" content="Copiado al portapapeles">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No se encontraron documentos">
      
        <meta name="lang:search.result.one" content="1 documento encontrado">
      
        <meta name="lang:search.result.other" content="# documentos encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>Seminario 2: Seminario de Swift - LPP</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#009688">
      
    
    
      <script src="../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#seminario-2-seminario-de-swift" tabindex="1" class="md-skip">
        Saltar a contenido
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="LPP" class="md-header-nav__button md-logo">
          
            <img src="../../imagenes/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              LPP
            </span>
            <span class="md-header-nav__topic">
              
                Seminario 2: Seminario de Swift
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Teclee para comenzar búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="LPP" class="md-nav__button md-logo">
      
        <img src="../../imagenes/logo.png" width="48" height="48">
      
    </a>
    LPP
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Teoría
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Teoría
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../teoria/tema00-descripcion-asignatura/tema00-descripcion-asignatura.html" title="Descripción de la asignatura" class="md-nav__link">
      Descripción de la asignatura
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../teoria/tema01-historia-lenguajes-programacion/tema01-historia-lenguajes-programacion.html" title="Tema 1: Historia de los lenguajes de programación" class="md-nav__link">
      Tema 1: Historia de los lenguajes de programación
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../teoria/tema02-programacion-funcional/tema02-programacion-funcional.html" title="Tema 2: Programación funcional" class="md-nav__link">
      Tema 2: Programación funcional
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Seminarios
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Seminarios
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../seminario1-scheme/seminario1-scheme.html" title="Seminario de Scheme" class="md-nav__link">
      Seminario de Scheme
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#el-lenguaje-de-programacion-swift" class="md-nav__link">
    El lenguaje de programación Swift
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejecucion-de-programas-swift" class="md-nav__link">
    Ejecución de programas Swift
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ejecucion-on-line" class="md-nav__link">
    Ejecución on-line
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejecucion-en-una-maquina-docker" class="md-nav__link">
    Ejecución en una máquina Docker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instalacion-en-macos" class="md-nav__link">
    Instalación en MacOS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instalacion-en-linux-ubuntu" class="md-nav__link">
    Instalación en Linux Ubuntu
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visual-studio-code" class="md-nav__link">
    Visual Studio Code
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#un-tour-de-swift" class="md-nav__link">
    Un tour de Swift
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bibliografia-y-referencias" class="md-nav__link">
    Bibliografía y referencias
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="seminario-2-seminario-de-swift">Seminario 2: Seminario de Swift<a class="headerlink" href="#seminario-2-seminario-de-swift" title="Permanent link">&para;</a></h1>
<h2 id="el-lenguaje-de-programacion-swift">El lenguaje de programación Swift<a class="headerlink" href="#el-lenguaje-de-programacion-swift" title="Permanent link">&para;</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Swift_(programming_language)">Swift</a> es
un lenguaje de programación compilado, de propósito general y
multi-paradigma desarrollado por Apple. Swift se presentó en la
Conferencia de Desarrolladores de Apple (WWDC) de 2014. Durante el año
2014 se desarrolló la versión 1.2 y en la WWDC 2015 se presentó Swift
2, una actualización importante del lenguaje. Inicialmente fue un
lenguaje propietario, pero el 3 de diciembre de 2015 se hizo <em>open
source</em> bajo la licencia Apache 2.0, para las plataformas Apple y
Linux. Los cambios en el lenguaje son propuestos y discutidos por la
comunidad en un proceso denominado <a href="https://github.com/apple/swift-evolution">Swift
evolution</a>. En la actualidad
se ha estabilizado la versión 5 del lenguaje, que es la que
utilizaremos para realizar las prácticas.</p>
<p>La siguiente descripción se ha extraído del repositorio GitHub de
Swift:</p>
<blockquote>
<p>Swift es un lenguaje de programación de sistemas de alta
eficiencia. Tiene una sintaxis limpia y moderna, ofrece acceso
transparente a código y librerías existentes en C y Objective-C, y
es seguro en el uso de memoria (<em>memory safe</em>).</p>
<p>Aunque está inspirado en Objective-C y en muchos otros lenguajes,
Swift no es en si mismo un lenguaje derivado de C. Como lenguaje
completo e independiente, Swift proporciona características
fundamentales como control de flujo, estructuras de datos y
funciones, junto con construcciones de alto nivel como objetos,
protocolos, clausuras y genéricos. Swift se apoya en módulos,
eliminando la necesidad de cabeceras y la duplicación de código que
éstas inducen.</p>
</blockquote>
<h2 id="ejecucion-de-programas-swift">Ejecución de programas Swift<a class="headerlink" href="#ejecucion-de-programas-swift" title="Permanent link">&para;</a></h2>
<p>Es posible descargar el compilador de Swift en los sistemas operativos
Mac (utilizando el entorno de desarrollo Xcode) o Linux.</p>
<p>Para la asignatura recomendamos utilizar una máquina Docker basada en
la distribución Linux. La utilización de la máquina Docker hace
posible su utilización en Windows y Mac sin instalar Xcode y permite
un entorno unificado en el que hacer las prácticas.</p>
<p>A continuación explicamos las distintas formas de ejecutar programas
Swift.</p>
<h3 id="ejecucion-on-line">Ejecución on-line<a class="headerlink" href="#ejecucion-on-line" title="Permanent link">&para;</a></h3>
<p>Existen varios sitios on-line en los que es posible ejecutar código
Swift. Recomendamos la dirección <a href="http://online.swiftplayground.run">http://online.swiftplayground.run</a>.</p>
<p><img src="imagenes/swift-on-line.png" width="700px"/></p>
<h3 id="ejecucion-en-una-maquina-docker">Ejecución en una máquina Docker<a class="headerlink" href="#ejecucion-en-una-maquina-docker" title="Permanent link">&para;</a></h3>
<p><a href="https://docs.docker.com">Docker</a> es una tecnología que ha tenido una gran expansión en los
últimos años. Permite construir máquinas virtuales ligeras que
utilizan el mismo sistema operativo de la máquina host. Estas máquinas
virtuales se denominan contenedores y, al compartir el propio sistema
operativo en el que se están ejecutando, su gestión (construcción,
arranque, parada, etc.) es muchísimo más rápida que las máquinas
virtuales tradicionales.</p>
<p>Docker se controla desde línea de comando, desde la aplicación
Terminal de Mac o el PowerShell de Windows. Existen comandos docker
para descargar imágenes, lanzar y parar contenedores, montar
directorios de la máquina host en contenedores, etc. Nosotros sólo
utilizaremos el comando <code>docker run</code> para lanzar un contenedor, pero
te recomendamos que investigues y pruebes más comandos y que conozcas
mejor esta interesante tecnología. Puedes empezar por la guía <a href="https://docs.docker.com/get-started/">Get
started with Docker</a>.</p>
<p>Usaremos la <a href="https://hub.docker.com/_/swift/">imagen Docker
swift:5.1.2</a>, que contiene el
comando <code>swift</code> necesario para compilar y ejecutar aplicaciones Swift.</p>
<h4>Instalación de Docker</h4>
<p>Debes instalar la versión de Docker CE (<em>Community Edition</em>)
correspondiente a tu sistema operativo. Descárgalo <a href="https://www.docker.com/community-edition">desde esta
página</a> y sigue las
instrucciones correspondientes a tu sistema operativo.</p>
<div class="admonition warning">
<p class="admonition-title">Cuidado</p>
<p>Si tienes Windows 10, la instalación nativa de Docker es
incompatible con la de Virtual Box. Puedes instalar <a href="https://docs.docker.com/toolbox/overview/">Docker
Toolbox</a>, que utiliza
una máquina Virtual Box para lanzar Docker. Si ya tienes instalada
una versión de Virtual Box no lo reinstales con Docker
Toolbox. Cuando la instalación te lo pida deschequéalo.</p>
<p>Una vez instalado Docker Toolbox debes abrir un <em>Docker Quickstart
Terminal</em> que contiene un entorno <em>bash</em> similar al de
Linux. Desde ese terminal puedes continuar la instalación de la
imagen Swift tal y como se explica a continuación.</p>
</div>
<h4>Instalación y ejecución de la imagen Swift</h4>
<p>Una vez instalado Docker, abre un terminal y lanza el siguiente
comando:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ docker pull swift:5.1.2
</pre></div>
</td></tr></table>

<p>El comando descarga la imagen <code>swift:5.1.2</code> a nuestro ordenador. Una
vez descargada lanzamos el contenedor con el siguiente comando:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ docker run --privileged -it --rm -v &quot;${PWD}:/home&quot; swift:5.1.2 /bin/bash
</pre></div>
</td></tr></table>

<p>El contenedor arranca en muy pocos segundos y aparece su prompt,
indicando que ya estás dentro de él y puedes ejecutar cualquier
comando linux:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>root@97265a262a58:/# ls
bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@97265a262a58:/# 
</pre></div>
</td></tr></table>

<p>Lanzamos el intérprete de Swift con el comando <code>swift</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>root@97265a262a58:/# swift
Welcome to Swift version 5.1.2 (swift-5.1.2-RELEASE).
Type :help for assistance.
1&gt; &quot;hola&quot;.uppercased()
$R0: String = &quot;HOLA&quot;
2&gt;
</pre></div>
</td></tr></table>

<p>Una vez hayamos terminado de trabajar podemos salir del intérprete
de Swift y del contenedor de la siguiente forma:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>3&gt; :quit
root@97265a262a58:/# exit
</pre></div>
</td></tr></table>

<h4>Directorio compartido entre el ordenador <em>host</em> y el contenedor</h4>
<p>El argumento <code>-v "${PWD}:/home"</code> del comando <code>docker run</code> hace que el
contenedor monte el <strong>directorio actual</strong> del ordenador anfitrión en
el directorio <code>/home</code> de la máquina docker. De esta forma podemos
editar los programas Swift en el ordenador anfitrión y ejecutarlos
desde línea de comando en el contenedor.</p>
<p>Recomendamos utilizar un editor de textos orientado a la programación
para editar los programas Swift en el ordenador anfitrión. Más
adelante hablaremos de los editores Atom y Visual Studio Code, pero
cualquier otro editor orientado a programación te puede valer
(Sublime, Xcode en el Mac, etc.)</p>
<p>Vamos a probar a usar el directorio compartido:</p>
<ol>
<li>Nos movemos en el ordenador anfitrión a un directorio en el que
   trabajaremos con los programas en Swift:</li>
</ol>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err">~ $ cd swift</span>
<span class="err">~/swift $ </span>
</pre></div>
</td></tr></table>

<div class="admonition warning">
<p class="admonition-title">Aviso</p>
<p>Si estás en Windows, por una cuestión de permisos, el directorio
de trabajo es recomendable que se encuentre bajo la ruta
<code>C:\Users\&lt;usuario&gt;\</code>. Por ejemplo:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ <span class="nb">cd</span> /c/Users/&lt;usuario&gt;/Documents/Ejercicios/Swift
</pre></div>
</td></tr></table>

</div>
<ol start="2">
<li>Creamos en el directorio actual un programa llamado
   <code>holaMundo.swift</code>.</li>
</ol>
<p><strong>Fichero <code>holaMundo.swift</code></strong>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1">// Primer programa Swift</span>

<span class="kd">var</span> <span class="nv">str</span> <span class="p">=</span> <span class="s">&quot;Mensaje&quot;</span>
<span class="n">str</span> <span class="p">=</span> <span class="s">&quot;Hola mundo!&quot;</span>
<span class="bp">print</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>

<span class="c1">// Vamos a sumar dos números</span>

<span class="kd">var</span> <span class="nv">firstNumber</span> <span class="p">=</span> <span class="mi">2</span>
<span class="kd">var</span> <span class="nv">secondNumber</span> <span class="p">=</span> <span class="mi">3</span>
<span class="kd">var</span> <span class="nv">totalSum</span> <span class="p">=</span> <span class="n">firstNumber</span> <span class="o">+</span> <span class="n">secondNumber</span>
<span class="n">firstNumber</span> <span class="p">=</span> <span class="n">firstNumber</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">secondNumber</span> <span class="p">=</span> <span class="n">secondNumber</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">totalSum</span> <span class="p">=</span> <span class="n">firstNumber</span> <span class="o">+</span> <span class="n">secondNumber</span>
<span class="bp">print</span><span class="p">(</span><span class="s">&quot;El resultado de la suma es = </span><span class="si">\(</span><span class="n">totalSum</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<ol start="3">
<li>Arrancamos el contenedor swift:</li>
</ol>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ docker run --privileged -it -v &quot;${PWD}:/home&quot; swift:5.1.2 /bin/bash
</pre></div>
</td></tr></table>

<ol start="4">
<li>Compilamos y ejecutamos el programa desde el contenedor, cambiando
   al directorio <code>/home</code> (el directorio compartido) y ejecutando el
   comando swift:</li>
</ol>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>root@3131534ce480:/# cd /home
root@3131534ce480:~# swift holaMundo.swift 
Hola mundo!
El resultado de la suma es = 7
</pre></div>
</td></tr></table>

<ol start="5">
<li>Prueba a cambiar cualquier cosa en el programa desde el editor en
   el ordenador anfitrión y a volver a ejecutar el programa desde el
   contenedor. Verás que el directorio está realmente compartido
   y que el programa se ejecuta con las modificaciones que has
   introducido.</li>
</ol>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>root@3131534ce480:~# exit
exit
~/swift $ 
</pre></div>
</td></tr></table>

<div class="admonition note">
<p class="admonition-title">Script</p>
<p>El siguiente script realiza la llamada a la máquina docker y
ejecuta el fichero que recibe como parámetro. Es muy cómodo para
ejecutar ficheros .swift en el directorio actual. Lo puedes
ejecutar en <strong>Linux</strong>, <strong>MacOS</strong> o en <strong>Windows</strong> con el <strong>Docker
Quickstart Terminal</strong>. </p>
<p><strong>Fichero <code>swift.sh</code></strong>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nv">SWIFT_VER</span><span class="o">=</span><span class="m">5</span>.1.2
docker run --privileged -it --rm -v <span class="s2">&quot;</span><span class="si">${</span><span class="nv">PWD</span><span class="si">}</span><span class="s2">:/home&quot;</span> <span class="s2">&quot;swift:</span><span class="si">${</span><span class="nv">SWIFT_VER</span><span class="si">}</span><span class="s2">&quot;</span> /bin/bash -c <span class="s2">&quot;</span>
<span class="s2">cd /home</span>
<span class="s2">swift </span><span class="nv">$*</span><span class="s2">&quot;</span>
</pre></div>
</td></tr></table>

<p>Puedes guardarlo en el directorio actual, hacerlo ejecutable con</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ chmod +x swift.sh
</pre></div>
</td></tr></table>

<p>y llamarlo pasándole como parámetro el fichero swift a ejecutar:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ ./swift.sh holaMundo.swift
</pre></div>
</td></tr></table>

<p>Si estás en <strong>Windows</strong> y quieres ejecutar el script desde un terminal
normal puedes hacer el siguiente fichero .bat que ejecuta el
script anterior en el terminal Docker.</p>
<p><strong>Fichero <code>swift.bat</code></strong>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err">&quot;C:\Program Files\Git\bin\bash.exe&quot; --login -i &quot;C:\Program Files\Docker Toolbox\start.sh&quot; &quot;./swift.sh %*&quot;</span>
</pre></div>
</td></tr></table>

<p>Uso:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err">&gt; swift holaMundo.swift</span>
</pre></div>
</td></tr></table>

</div>
<h3 id="instalacion-en-macos">Instalación en MacOS<a class="headerlink" href="#instalacion-en-macos" title="Permanent link">&para;</a></h3>
<p>Para instalar la última versión de Swift en MacOs debes instalar
Xcode. Una vez instalado puedes ejecutar Swift desde el terminal.</p>
<h3 id="instalacion-en-linux-ubuntu">Instalación en Linux Ubuntu<a class="headerlink" href="#instalacion-en-linux-ubuntu" title="Permanent link">&para;</a></h3>
<p>Existe una distribución oficial de Swift para Ubuntu de 64 bits
(distribuciones 14.04, 16.04 y 16.10).</p>
<p>Puedes encontrar la información completa en la
<a href="https://swift.org/download/">web oficial de Apple</a>.</p>
<p>Brevemente, los pasos son los siguientes:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ sudo apt-get install clang libicu-dev
// Descargar la versión y plataforma deseada <span class="o">(</span>fichero swift-&lt;VERSION&gt;-&lt;PLATFORM&gt;.tar.gz<span class="o">)</span>
$ tar xzf swift-&lt;VERSION&gt;-&lt;PLATFORM&gt;.tar.gz
// Esto crea el directorio usr/ en la localización del archivo
// Actualizar el PATH o mover usr/bin/swift al directorio /usr/bin
</pre></div>
</td></tr></table>

<h3 id="visual-studio-code">Visual Studio Code<a class="headerlink" href="#visual-studio-code" title="Permanent link">&para;</a></h3>
<p>Para editar código Swift puedes usar cualquier editor orientado a
programación como Visual Studio Code o Atom. Aconsejamos <a href="https://code.visualstudio.com">Visual Studio
Code</a>.</p>
<p>Es recomendable instalar la extensión <code>Swift Language</code> que realiza un
coloreado de sintaxis de Swift.</p>
<p>Para trabajar de forma más cómoda podemos abrir el terminal integrado
<strong>Ver &gt; Terminal integrado</strong> y lanzar el contenedor de Swift en ese
terminal.</p>
<p><img src="imagenes/vcode.png" width="700px"/></p>
<p>Puedes consultar los conceptos básicos de Visual Studio Code y el
manual completo en <a href="https://code.visualstudio.com/docs">este enlace</a>.</p>
<h4>Integración del Docker Quickstart Terminal en Visual Studio Code (Windows)</h4>
<p>Abre un <em>Docker Quickstart Terminal</em>, ejecuta el siguiente comando y
anota los valores de las variables de entorno:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ <span class="nb">set</span> <span class="p">|</span> grep DOCKER_
<span class="nv">DOCKER_CERT_PATH</span><span class="o">=</span><span class="s1">&#39;C:\Users\&lt;usuario&gt;\.docker\machine\machines\default&#39;</span>
<span class="nv">DOCKER_HOST</span><span class="o">=</span>tcp://192.168.99.100:2376
<span class="nv">DOCKER_MACHINE_NAME</span><span class="o">=</span>default
<span class="nv">DOCKER_TLS_VERIFY</span><span class="o">=</span><span class="m">1</span>
<span class="nv">DOCKER_TOOLBOX_INSTALL_PATH</span><span class="o">=</span><span class="s1">&#39;C:\Program Files\Docker Toolbox&#39;</span>
</pre></div>
</td></tr></table>

<p>Abre la carpeta de trabajo como área de trabajo: <em>Archivo -&gt; Abrir área de trabajo...</em>.</p>
<p>Abre el Terminal integrado (Crtl+ñ). Te dá a elegir entre tres shells
(PowerShell, CMD, o Git bash). Elige el que mejor te venga por
defecto, ya que en cualquier caso, para trabajar con el Swift de
Docker hay que ajustar la configuración.</p>
<p>Abre la configuración (<em>Crl+</em>, o <em>Archivo-&gt;Preferencias-&gt;Configuración</em>).</p>
<p>Fíjate que son tres los ficheros de configuración posibles:</p>
<ul>
<li>Configuración predeterminada</li>
<li>Configuración de usuario</li>
<li>Configuración de área de trabajo</li>
</ul>
<p>En la Configuración de usuario o en la de área de trabajo, dependiendo de en
cuál te convenga más, pon entre las <code>{}</code> los siguientes valores de configuración:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err">{</span>
<span class="err">&quot;terminal.integrated.shell.windows&quot;: &quot;C:\\Program Files\\Git\\bin\\bash.exe&quot;,</span>
<span class="err">&quot;terminal.integrated.env.windows&quot;: {</span>
<span class="err">&quot;DOCKER_CERT_PATH&quot;: &quot;C:\\Users\\&lt;usuario&gt;\\.docker\\machine\\machines\\default&quot;,</span>
<span class="err">&quot;DOCKER_HOST&quot;: &quot;tcp://192.168.99.100:2376&quot;,</span>
<span class="err">&quot;DOCKER_MACHINE_NAME&quot;: &quot;default&quot;,</span>
<span class="err">&quot;DOCKER_TLS_VERIFY&quot;: &quot;1&quot;,</span>
<span class="err">&quot;DOCKER_TOOLBOX_INSTALL_PATH&quot;: &quot;C:\\Program Files\\Docker Toolbox&quot;</span>
<span class="err">},</span>
<span class="err">&quot;terminal.integrated.shellArgs.windows&quot;: [&quot;--login&quot;, &quot;-i&quot;, &quot;C:\\Program Files\\Docker Toolbox\\start.sh&quot;]</span>
<span class="err">}</span>
</pre></div>
</td></tr></table>

<p>Fíjate que el valor de <code>terminal.integrated.env.windows</code> depende de los valores que
obtuvistes en el Docker Quickstart Terminal cuando probamos las Docker Tools.</p>
<p>Si eliges cambiar la Configuración de área de trabajo, en lugar de la de Usuario,
la configuración se guarda en una subcarpeta <code>".vscode"</code> de la carpeta de trabajo,
y este tipo de Terminal interactivo se abrirá solo cuando trabajes en esa carpeta.
Por defecto, en otras carpetas podrás tener el terminal que elijas.</p>
<h2 id="un-tour-de-swift">Un tour de Swift<a class="headerlink" href="#un-tour-de-swift" title="Permanent link">&para;</a></h2>
<p>Aquí empieza el seminario de Swift. El texto que hay a continuación es
una traducción del documento de Apple
<em><a href="https://developer.apple.com/library/prerelease/content/documentation/Swift/Conceptual/Swift_Programming_Language/GuidedTour.html#//apple_ref/doc/uid/TP40014097-CH2-ID1">A Swift Tour</a></em>
en el que se presenta una introducción rápida a los conceptos
fundamentales del lenguaje. En los temas siguientes de la asignatura
(Tema 5 - Programación Funcional con Swift y Tema 6 - Programación
Orientada a Objetos con Swift) profundizaremos en aspectos como
funciones, genéricos, clases o protocolos.</p>
<p>Te recomendamos que crees un fichero llamado <code>seminario.swift</code> y que
vayas copiando y probando en él todos los ejemplos que aparecen a
continuación. </p>
<p>La tradición sugiere que el primer programa en un nuevo lenguaje
debería imprimir las palabras "Hello, world!" en la pantalla. En
Swift, esto puede hacerse con una única línea:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="bp">print</span><span class="p">(</span><span class="s">&quot;Hello, world!&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Si has escrito código en C o en Objective-C, esta sintaxis te parecerá
familiar. En Swift, esta línea de código es un programa completo. No
necesitas importar una biblioteca separada para funcionaliades como
entrada/salida o manejo de cadenas. El código escrito en el ámbito
global se usa como el punto de entrada del programa, por lo que no
necesitas una función <code>main()</code>. Tampoco tienes que escribir puntos y
comas al final de cada sentencia.</p>
<p>Este tour te da información suficiente para empezar a escribir código
in Swift enseñándote cómo conseguir una variedad de tareas de
programación. No te preocupes si no entiendes algo, todo lo que se
introduce en este tour se explica en detalle en el
<a href="https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/TheBasics.html#//apple_ref/doc/uid/TP40014097-CH5-ID309">resto del libro</a>.</p>
<h4>Valores simples</h4>
<p>Usa <code>let</code> para crear una constante y <code>var</code> para crear una variable. No
es necesario que se conozca en tiempo de compilación el valor de una
constante, pero debes asignarle un valor exactamente una vez. Esto
significa que puedes usar constantes para nombrar un valor que
determinas una vez pero que usas en muchos lugares.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nv">miVariable</span> <span class="p">=</span> <span class="mi">42</span>
<span class="n">miVariable</span> <span class="p">=</span> <span class="mi">50</span>
<span class="kd">let</span> <span class="nv">miConstante</span> <span class="p">=</span> <span class="mi">42</span>
</pre></div>
</td></tr></table>

<p>Una constante o variable debe tener el mismo tipo que el valor que
quieres asignarle. Sin embargo, no siempre tienes que escribir el tipo
explícitamente. Cuando se proporciona un valor al crear una constante
o una variable el compilador infiere su tipo. En el ejemplo anterior,
el compilador infiere que <code>myVariable</code> es un entero porque su valor
inicial es un entero.</p>
<p>Si el valor inicial no proporciona información suficiente (o si no hay
valor inicial), especifica el tipo escribiéndolo después de la
variable, separándolo por dos puntos.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">implicitoInteger</span> <span class="p">=</span> <span class="mi">70</span>
<span class="kd">let</span> <span class="nv">implicitoDouble</span> <span class="p">=</span> <span class="mf">70.0</span>
<span class="kd">let</span> <span class="nv">explicitoDouble</span><span class="p">:</span> <span class="nb">Double</span> <span class="p">=</span> <span class="mi">70</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Crea una constante con el tipo explícito de <code>Float</code> y un valor de 4.</p>
</blockquote>
<p>Los valores nunca se convierten implícitamente a otro tipo. Si
necesitas convertir un valor a un tipo diferente, construye
explícitamente una instancia del tipo deseado.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">etiqueta</span> <span class="p">=</span> <span class="s">&quot;El ancho es &quot;</span>
<span class="kd">let</span> <span class="nv">ancho</span> <span class="p">=</span> <span class="mi">94</span>
<span class="kd">let</span> <span class="nv">anchoEtiqueta</span> <span class="p">=</span> <span class="n">etiqueta</span> <span class="o">+</span> <span class="nb">String</span><span class="p">(</span><span class="n">ancho</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Intenta eliminar la conversión a <code>String</code> en la última línea. ¿Qué error obtienes?</p>
</blockquote>
<p>Hay una forma aún más sencilla de incluir valores en cadenas: escribe
el valor entre paréntesis, y escribe una barra invertida (<code>\</code>) antes
de los paréntesis. Por ejemplo:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">manzanas</span> <span class="p">=</span> <span class="mi">3</span>
<span class="kd">let</span> <span class="nv">naranjas</span> <span class="p">=</span> <span class="mi">5</span>
<span class="kd">let</span> <span class="nv">resumenManzanas</span> <span class="p">=</span> <span class="s">&quot;Tengo </span><span class="si">\(</span><span class="n">manzanas</span><span class="si">)</span><span class="s"> manzanas.&quot;</span>
<span class="kd">let</span> <span class="nv">resumenFrutas</span> <span class="p">=</span> <span class="s">&quot;Tengo </span><span class="si">\(</span><span class="n">manzanas</span> <span class="o">+</span> <span class="n">naranjas</span><span class="si">)</span><span class="s"> frutas.&quot;</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Usa <code>\()</code> para incluir un cálculo en punto flotante en una cadena y
para incluir el nombre de alguien en un saludo.</p>
</blockquote>
<p>Crea arrays y diccionarios utilizando corchetes (<code>[]</code>), y accede a sus
elementos escribiendo el índice o la clave en los corchetes. Se
permite una coma después del último elemento.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nv">listaCompra</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;huevos&quot;</span><span class="p">,</span> <span class="s">&quot;agua&quot;</span><span class="p">,</span> <span class="s">&quot;tomates&quot;</span><span class="p">,</span> <span class="s">&quot;pan&quot;</span><span class="p">]</span>
<span class="n">listaCompra</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">=</span> <span class="s">&quot;botella de agua&quot;</span>

<span class="kd">var</span> <span class="nv">trabajos</span> <span class="p">=</span> <span class="p">[</span>
    <span class="s">&quot;Malcolm&quot;</span><span class="p">:</span> <span class="s">&quot;Capitán&quot;</span><span class="p">,</span>
    <span class="s">&quot;Kaylee&quot;</span><span class="p">:</span> <span class="s">&quot;Mecánico&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">trabajos</span><span class="p">[</span><span class="s">&quot;Jayne&quot;</span><span class="p">]</span> <span class="p">=</span> <span class="s">&quot;Relaciones públicas&quot;</span>
</pre></div>
</td></tr></table>

<p>Para crear un array o diccionario vacío, usa la sintaxis de inicialización.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">arrayVacio</span> <span class="p">=</span> <span class="p">[</span><span class="nb">String</span><span class="p">]()</span>
<span class="kd">let</span> <span class="nv">diccionarioVacio</span> <span class="p">=</span> <span class="p">[</span><span class="nb">String</span><span class="p">:</span> <span class="nb">Float</span><span class="p">]()</span>
</pre></div>
</td></tr></table>

<p>Si el tipo de información puede ser inferido, puedes escribir un array
vacío como <code>[]</code> y un diccionario vacío como <code>[:]</code>; por ejemplo, cuando
estableces un nuevo valor para una variable o pasas un argumento a una
función.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">listaCompra</span> <span class="p">=</span> <span class="p">[]</span>
<span class="n">trabajos</span> <span class="p">=</span> <span class="p">[:]</span>
</pre></div>
</td></tr></table>

<h4>Tuplas</h4>
<p>Una tupla agrupa varios valores en un único valor compuesto.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">http404Error</span> <span class="p">=</span> <span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="s">&quot;Not Found&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>El tipo de la tupla es <code>(Int, String)</code>.</p>
<p>Para obtener los valores de la tupla podemos <em>descomponerla</em>. Si
queremos ignorar una parte podemos utilizar un subrrayado (<code>_</code>).</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="p">(</span><span class="n">statusCode</span><span class="p">,</span> <span class="n">statusMensaje</span><span class="p">)</span> <span class="p">=</span> <span class="n">http404Error</span>
<span class="kd">let</span> <span class="p">(</span><span class="n">soloStatusCode</span><span class="p">,</span> <span class="kc">_</span><span class="p">)</span> <span class="p">=</span> <span class="n">http404Error</span>
</pre></div>
</td></tr></table>

<p>También podemos acceder por posición:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="bp">print</span><span class="p">(</span><span class="s">&quot;El código de estado es </span><span class="si">\(</span><span class="n">http404Error</span><span class="p">.</span><span class="mi">0</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<h4>Control de flujo</h4>
<p>Usa <code>if</code> y <code>switch</code> para hacer condicionales y usa <code>for-in</code>, <code>for</code>,
<code>while</code> y <code>repeat-while</code> para hacer bucles. Los paréntesis alrededor
de las condiciones o de la variable del bucle son opcionales. Se
requieren llaves alrededor del cuerpo.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">puntuacionesIndividuales</span> <span class="p">=</span> <span class="p">[</span><span class="mi">75</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">103</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">12</span><span class="p">]</span>
<span class="kd">var</span> <span class="nv">puntuacionEquipo</span> <span class="p">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">puntuacion</span> <span class="k">in</span> <span class="n">puntuacionesIndividuales</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">puntuacion</span> <span class="o">&gt;</span> <span class="mi">50</span> <span class="p">{</span>
        <span class="n">puntuacionEquipo</span> <span class="o">+=</span> <span class="mi">3</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">puntuacionEquipo</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="bp">print</span><span class="p">(</span><span class="n">puntuacionEquipo</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>En una sentencia <code>if</code>, el condicional debe ser una expresión booleana;
esto significa que código como <code>if score { ... }</code> es un error, no una
comparación implícita con cero.</p>
<p>Puedes usar <code>if</code> y <code>let</code> juntos para trabajar con valores que pueden
faltar. Estos valores se representan como opcionales. Un valor
opcional o bien contiene un valor o contiene <code>nil</code> para indicar que el
valor falta. Escribe una interrogación (<code>?</code>) después del tipo de un
valor para marcar el valor como opcional.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nv">cadenaOpcional</span><span class="p">:</span> <span class="nb">String</span><span class="p">?</span> <span class="p">=</span> <span class="s">&quot;Hola&quot;</span>
<span class="bp">print</span><span class="p">(</span><span class="n">cadenaOpcional</span> <span class="p">==</span> <span class="kc">nil</span><span class="p">)</span>

<span class="kd">var</span> <span class="nv">nombreOpcional</span><span class="p">:</span> <span class="nb">String</span><span class="p">?</span> <span class="p">=</span> <span class="s">&quot;John Appleseed&quot;</span>
<span class="kd">var</span> <span class="nv">saludo</span> <span class="p">=</span> <span class="s">&quot;Hola!&quot;</span>
<span class="k">if</span> <span class="kd">let</span> <span class="nv">nombre</span> <span class="p">=</span> <span class="n">nombreOpcional</span> <span class="p">{</span>
    <span class="n">saludo</span> <span class="p">=</span> <span class="s">&quot;Hola, </span><span class="si">\(</span><span class="n">nombre</span><span class="si">)</span><span class="s">&quot;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Cambia <code>nombreOpcional</code> a <code>nil</code>. ¿Qué saludo obtienes? Añade una
cláusula <code>else</code> que establezca un saludo diferente si
<code>nombreOpcional</code> es <code>nil</code>.</p>
</blockquote>
<p>Si el valor opcional es <code>nil</code>, el condicional es <code>false</code> y el código
en las llaves se salta. En otro caso, el valor opcional se desenvuelve
y se asigna a la constante después del <code>let</code>, lo que hace que el valor
desenvuelto esté disponible dentro del bloque de código.</p>
<p>Otra forma de manejar valores opcionales es proporcionar un valor por
defecto usando el operador <code>??</code>. Si falta el valor valor opcional, se
usa el valor por defecto en su lugar.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">nombrePila</span><span class="p">:</span> <span class="nb">String</span><span class="p">?</span> <span class="p">=</span> <span class="kc">nil</span>
<span class="kd">let</span> <span class="nv">nombreCompleto</span><span class="p">:</span> <span class="nb">String</span> <span class="p">=</span> <span class="s">&quot;John Appleseed&quot;</span>
<span class="kd">let</span> <span class="nv">saludoInformal</span> <span class="p">=</span> <span class="s">&quot;¿Qué tal, </span><span class="si">\(</span><span class="n">nombrePila</span> <span class="p">??</span> <span class="n">nombreCompleto</span><span class="si">)</span><span class="s">?&quot;</span>
</pre></div>
</td></tr></table>

<p>Las sentencias <code>switch</code> permiten cualquier tipo de datos y una amplia
variedad de operaciones de comparación; no están limitados a enteros y
pruebas de igualdad.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">verdura</span> <span class="p">=</span> <span class="s">&quot;pimiento rojo&quot;</span>
<span class="k">switch</span> <span class="n">verdura</span> <span class="p">{</span>
    <span class="k">case</span> <span class="s">&quot;zanahoria&quot;</span><span class="p">:</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Buena para la vista.&quot;</span><span class="p">)</span>
    <span class="k">case</span> <span class="s">&quot;lechuga&quot;</span><span class="p">,</span> <span class="s">&quot;tomates&quot;</span><span class="p">:</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Podrías hacer una buena ensalada.&quot;</span><span class="p">)</span>
    <span class="k">default</span><span class="p">:</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Siempre puedes hacer una buena sopa.&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Intenta eliminar el caso por defecto. ¿Qué error obtienes?</p>
</blockquote>
<p>Después de ejecutar el código dentro del caso que se empareja, el
programa sale de la sentencia <code>switch</code>. La ejecución no continua con
el siguiente caso, por lo que no hay necesidad de romper el <code>switch</code>
al final del código de cada caso.</p>
<p>Usa <code>for-in</code> para iterar sobre elementos en un diccionario
proporcionando una pareja de nombres para usar en cada pareja
clave-valor. Los diccionarios son colecciones desordenadas, por lo que
sus claves y valores se iteran en un orden arbitrario.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">numerosInteresantes</span> <span class="p">=</span> <span class="p">[</span>
    <span class="s">&quot;Primos&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">],</span>
    <span class="s">&quot;Fibonacci&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
    <span class="s">&quot;Cuadrados&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">],</span>
<span class="p">]</span>
<span class="kd">var</span> <span class="nv">mayor</span> <span class="p">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="p">(</span><span class="n">clase</span><span class="p">,</span> <span class="n">numeros</span><span class="p">)</span> <span class="k">in</span> <span class="n">numerosInteresantes</span> <span class="p">{</span>
    <span class="k">for</span> <span class="n">numero</span> <span class="k">in</span> <span class="n">numeros</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">numero</span> <span class="o">&gt;</span> <span class="n">mayor</span> <span class="p">{</span>
            <span class="n">mayor</span> <span class="p">=</span> <span class="n">numero</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="bp">print</span><span class="p">(</span><span class="n">mayor</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Añade otra variable para seguir qué clase de número es el mayor.</p>
</blockquote>
<p>Usa <code>while</code> para repetir un bloque de código hasta que una condición
cambie. La condición de un bucle puede estar también al final,
asegurando que el bucle se ejecuta al menos una vez.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nv">n</span> <span class="p">=</span> <span class="mi">2</span>
<span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">100</span> <span class="p">{</span>
    <span class="n">n</span> <span class="o">*=</span> <span class="mi">2</span>
<span class="p">}</span>
<span class="bp">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

<span class="kd">var</span> <span class="nv">m</span> <span class="p">=</span> <span class="mi">2</span>
<span class="k">repeat</span> <span class="p">{</span>
    <span class="n">m</span> <span class="o">*=</span>  <span class="mi">2</span>
<span class="p">}</span> <span class="k">while</span> <span class="n">m</span> <span class="o">&lt;</span> <span class="mi">100</span>
<span class="bp">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Puedes definir un índice en un bucle usando <code>..&lt;</code> para construir un
rango de índices.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nv">total</span> <span class="p">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mf">0.</span><span class="p">.&lt;</span><span class="mi">4</span> <span class="p">{</span>
    <span class="n">total</span> <span class="o">+=</span> <span class="n">i</span>
<span class="p">}</span>
<span class="bp">print</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Usa <code>..&lt;</code> para construir un rango que omita su valor superior, y usa
<code>...</code> para construir un rango que incluya ambos valores.</p>
<h4>Funciones y clausuras</h4>
<p>Usa <code>func</code> para declarar una función. Usa <code>-&gt;</code> para separar los
nombres de los parámetros y sus tipos del tipo devuelto de la
función.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">func</span> <span class="nf">saluda</span><span class="p">(</span><span class="n">nombre</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">dia</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">&quot;Hola </span><span class="si">\(</span><span class="n">nombre</span><span class="si">)</span><span class="s">, hoy es </span><span class="si">\(</span><span class="n">dia</span><span class="si">)</span><span class="s">.&quot;</span>
<span class="p">}</span>
<span class="n">saluda</span><span class="p">(</span><span class="n">nombre</span><span class="p">:</span> <span class="s">&quot;Bob&quot;</span><span class="p">,</span> <span class="n">dia</span><span class="p">:</span> <span class="s">&quot;Martes&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Elimina el parámetro día. Añade un parámetro para incluir la comida
de hoy en el saludo.</p>
</blockquote>
<p>Por defecto, las funciones usan los nombres de los parámetros como
etiquetas de los argumentos. Es posible definir una etiqueta
escribiéndola antes del nombre del parámetro, o no usar etiqueta
escribiendo <code>_</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">func</span> <span class="nf">saluda</span><span class="p">(</span><span class="kc">_</span> <span class="n">nombre</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">el</span> <span class="n">dia</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">&quot;Hola </span><span class="si">\(</span><span class="n">nombre</span><span class="si">)</span><span class="s">, hoy es </span><span class="si">\(</span><span class="n">dia</span><span class="si">)</span><span class="s">.&quot;</span>
<span class="p">}</span>
<span class="n">saluda</span><span class="p">(</span><span class="s">&quot;Bob&quot;</span><span class="p">,</span> <span class="n">el</span><span class="p">:</span> <span class="s">&quot;Martes&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Las funciones pueden devolver cualquier tipo de dato, como tuplas.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">func</span> <span class="nf">calculaEstadisticas</span><span class="p">(</span><span class="n">puntuaciones</span><span class="p">:</span> <span class="p">[</span><span class="nb">Int</span><span class="p">])</span> <span class="p">-&gt;</span> 
                        <span class="p">(</span><span class="bp">min</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="bp">max</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="n">sum</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">min</span> <span class="p">=</span> <span class="n">puntuaciones</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="kd">var</span> <span class="nv">max</span> <span class="p">=</span> <span class="n">puntuaciones</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="kd">var</span> <span class="nv">sum</span> <span class="p">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">puntuacion</span> <span class="k">in</span> <span class="n">puntuaciones</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">puntuacion</span> <span class="o">&gt;</span> <span class="bp">max</span> <span class="p">{</span>
            <span class="bp">max</span> <span class="p">=</span> <span class="n">puntuacion</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">puntuacion</span> <span class="o">&lt;</span> <span class="bp">min</span> <span class="p">{</span>
            <span class="bp">min</span> <span class="p">=</span> <span class="n">puntuacion</span>
        <span class="p">}</span>
        <span class="n">sum</span> <span class="o">+=</span> <span class="n">puntuacion</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">(</span><span class="bp">min</span><span class="p">,</span> <span class="bp">max</span><span class="p">,</span> <span class="n">sum</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">let</span> <span class="nv">estadisticas</span> <span class="p">=</span> <span class="n">calculaEstadisticas</span><span class="p">(</span><span class="n">puntuaciones</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
<span class="bp">print</span><span class="p">(</span><span class="n">estadisticas</span><span class="p">.</span><span class="n">sum</span><span class="p">)</span>
<span class="bp">print</span><span class="p">(</span><span class="n">estadisticas</span><span class="p">.</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Las funciones también pueden tener un número variable de argumentos,
agrupándose todos ellos en un array.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">func</span> <span class="nf">suma</span><span class="p">(</span><span class="n">numeros</span><span class="p">:</span> <span class="nb">Int</span><span class="p">...)</span> <span class="p">-&gt;</span> <span class="nb">Int</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">suma</span> <span class="p">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">numeros</span> <span class="k">in</span> <span class="n">numeros</span> <span class="p">{</span>
        <span class="n">suma</span> <span class="o">+=</span> <span class="n">numeros</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">suma</span>
<span class="p">}</span>
<span class="bp">print</span><span class="p">(</span><span class="n">suma</span><span class="p">())</span>
<span class="bp">print</span><span class="p">(</span><span class="n">suma</span><span class="p">(</span><span class="n">numeros</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">597</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Escribe una función que calcule la media de sus argumentos.</p>
</blockquote>
<p>Las funciones pueden anidarse. Las funciones pueden acceder variables
declaradas en la función exterior. Puedes usar funciones anidadas para
organizar el código en una función que es larga o complicada.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">func</span> <span class="nf">devuelveQuince</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">Int</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">y</span> <span class="p">=</span> <span class="mi">10</span>
    <span class="kd">func</span> <span class="nf">suma</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">y</span> <span class="o">+=</span> <span class="mi">5</span>
    <span class="p">}</span>
    <span class="n">suma</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">y</span>
<span class="p">}</span>
<span class="bp">print</span><span class="p">(</span><span class="n">devuelveQuince</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<p>Las funciones son un tipo de primera clase. Esto significa que una
función puede devolver otra función como resultado.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">func</span> <span class="nf">construyeIncrementador</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="p">((</span><span class="nb">Int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">sumaUno</span><span class="p">(</span><span class="n">numero</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">numero</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">sumaUno</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nv">incrementa</span> <span class="p">=</span> <span class="n">construyeIncrementador</span><span class="p">()</span>
<span class="bp">print</span><span class="p">(</span><span class="n">incrementa</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<p>Podemos modificar el ejemplo <code>devuelveQuince</code> para que se devuelva una
versión modificada de la función <code>suma</code>. Llamamos a la función
<code>devuelveSuma</code>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">func</span> <span class="nf">devuelveSuma</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="p">(()</span> <span class="p">-&gt;</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">y</span> <span class="p">=</span> <span class="mi">10</span>
    <span class="kd">func</span> <span class="nf">suma</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">Int</span> <span class="p">{</span>
        <span class="n">y</span> <span class="o">+=</span> <span class="mi">5</span>
        <span class="k">return</span> <span class="n">y</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">suma</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nv">f</span> <span class="p">=</span> <span class="n">devuelveSuma</span><span class="p">()</span>
<span class="bp">print</span><span class="p">(</span><span class="n">f</span><span class="p">())</span>
<span class="bp">print</span><span class="p">(</span><span class="n">f</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<p>Una función puede tomar otra función como uno de sus argumentos.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">func</span> <span class="nf">cumpleCondicion</span><span class="p">(</span><span class="n">lista</span><span class="p">:</span> <span class="p">[</span><span class="nb">Int</span><span class="p">],</span> <span class="n">condicion</span><span class="p">:</span> <span class="p">(</span><span class="nb">Int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span> <span class="p">{</span>
    <span class="k">for</span> <span class="n">item</span> <span class="k">in</span> <span class="n">lista</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">condicion</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">false</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">menorQueDiez</span><span class="p">(</span><span class="n">numero</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">numero</span> <span class="o">&lt;</span> <span class="mi">10</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nv">numeros</span> <span class="p">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">12</span><span class="p">]</span>
<span class="bp">print</span><span class="p">(</span><span class="n">cumpleCondicion</span><span class="p">(</span><span class="n">lista</span><span class="p">:</span> <span class="n">numeros</span><span class="p">,</span> <span class="n">condicion</span><span class="p">:</span> <span class="n">menorQueDiez</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<p>Las funciones son en la realidad un caso especial de clausuras:
bloques de código que pueden ser llamados después.  El código en la
clausura tiene acceso a cosas como variables y funciones que estaban
disponibles en el ámbito (<em>scope</em>) en el que se creó la clausura,
incluso si la clausura está en un ámbito distinto cuando se
ejecuta; ya viste un ejemplo de esto con las funciones
anidadas. Puedes escribir una clausura rodeando el código con llaves
(<code>{}</code>). Usa <code>in</code> para separar los argumentos del cuerpo.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">numeros</span><span class="p">.</span><span class="bp">map</span><span class="p">({</span>
    <span class="p">(</span><span class="n">numero</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Int</span> <span class="k">in</span>
    <span class="kd">let</span> <span class="nv">resultado</span> <span class="p">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">numero</span>
    <span class="k">return</span> <span class="n">resultado</span>
<span class="p">})</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Reescribe la clausura para que devuelva cero para todos los números
impares.</p>
</blockquote>
<p>Tienes bastantes opciones para escribir clausuras de forma más
concisa. Cuando ya se conoce el tipo de una clausura puedes omitir el
tipo de sus parámetros, el tipo devuelto o ambos. Las clausuras
escritas en una sentencia devuelven implícitamente el valor de esa única
sentencia.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">numerosMapeados</span> <span class="p">=</span> <span class="n">numeros</span><span class="p">.</span><span class="bp">map</span><span class="p">({</span> <span class="n">numero</span> <span class="k">in</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">numero</span> <span class="p">})</span>
<span class="bp">print</span><span class="p">(</span><span class="n">numerosMapeados</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Puedes referirte a los parámetros por número en lugar de por nombre;
este enfoque es especialmente útil en clausuras muy cortas. Una
clausura pasada como último argumento puede aparecer inmediatamente
después de los paréntesis. Cuando una clausura es el único argumento
de una función, puedes omitir los paréntesis por completo.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">numerosOrdenados</span> <span class="p">=</span> <span class="n">numeros</span><span class="p">.</span><span class="bp">sorted</span> <span class="p">{</span> <span class="nv">$0</span> <span class="o">&gt;</span> <span class="nv">$1</span> <span class="p">}</span>
<span class="bp">print</span><span class="p">(</span><span class="n">numerosOrdenados</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<h4>Objetos y clases</h4>
<p>Usa <code>class</code> seguido por el nombre de la clase para crear una
clase. Una declaración de una propiedad en una clase se escribe de la
misma forma que la declaración de una constante o una variable,
excepto que está en el contexto de una clase. De la misma forma, las
declaraciones de los métodos se escriben de la misma forma que las
funciones.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Figura</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">numeroDeLados</span> <span class="p">=</span> <span class="mi">0</span>
    <span class="kd">func</span> <span class="nf">descripcionSencilla</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">&quot;Una figura con </span><span class="si">\(</span><span class="n">numeroDeLados</span><span class="si">)</span><span class="s"> lados.&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Añade una propiedad constante con <code>let</code>, y añade otro método que
tome un argumento.</p>
</blockquote>
<p>Crea una instancia de una clase poniendo paréntesis después del nombre
de la clase. Usa la sintaxis de punto para acceder a las propiedades y
los métodos de la instancia.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nv">figura</span> <span class="p">=</span> <span class="n">Figura</span><span class="p">()</span>
<span class="n">figura</span><span class="p">.</span><span class="n">numeroDeLados</span> <span class="p">=</span> <span class="mi">7</span>
<span class="kd">var</span> <span class="nv">descripcionFigura</span> <span class="p">=</span> <span class="n">figura</span><span class="p">.</span><span class="n">descripcionSencilla</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p>A esta versión de la clase <code>Figura</code> le falta algo importante: un
inicializador para preparar la clase cuando se crea una instancia. Usa
<code>init</code> para crear uno.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">FiguraConNombre</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">numeroDeLados</span><span class="p">:</span> <span class="nb">Int</span> <span class="p">=</span> <span class="mi">0</span>
    <span class="kd">var</span> <span class="nv">nombre</span><span class="p">:</span> <span class="nb">String</span>

    <span class="kd">init</span><span class="p">(</span><span class="n">nombre</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">nombre</span> <span class="p">=</span> <span class="n">nombre</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">descripcionSencilla</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">&quot;Una figura con </span><span class="si">\(</span><span class="n">numeroDeLados</span><span class="si">)</span><span class="s"> lados.&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Fíjate en cómo se utiliza <code>self</code> para distinguir la propiedad <code>nombre</code>
del argumento <code>nombre</code> al inicializador. Los argumentos al
inicializador se pasan como una llamada a una función cuando creas una
instancia de la clase. Cada propiedad necesita un valor asignado; ya
sea en su declaración (como <code>numeroDeLados</code>) o en el inicializador
(como <code>nombre</code>).</p>
<p>Usa <code>deinit</code> para crear un <em>desinicializador</em> si necesitas realizar
alguna limpieza antes de que el objeto sea eliminado.</p>
<p>Las subclases incluyen el nombre de su subclase después del nombre de
la clase, separado por dos puntos. No hay ningún requisito de que las
clases deban ser subclases de alguna clase raíz, por lo que puedes
omitir una superclase si así lo necesitas.</p>
<p>Los métodos en una subclase que sobreescriben la implementación de la
superclase se marcan con <code>override</code>; la sobreescritura de un método
por accidente, sin <code>override</code>, se detecta por el compilador como un
error. El compilador también detecta métodos con <code>override</code> que
realmente no sobreescriben ningún método de la superclase.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Cuadrado</span><span class="p">:</span> <span class="n">FiguraConNombre</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">longitudLado</span><span class="p">:</span> <span class="nb">Double</span>

    <span class="kd">init</span><span class="p">(</span><span class="n">longitudLado</span><span class="p">:</span> <span class="nb">Double</span><span class="p">,</span> <span class="n">nombre</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">longitudLado</span> <span class="p">=</span> <span class="n">longitudLado</span>
        <span class="kc">super</span><span class="p">.</span><span class="kd">init</span><span class="p">(</span><span class="n">nombre</span><span class="p">:</span> <span class="n">nombre</span><span class="p">)</span>
        <span class="n">numeroDeLados</span> <span class="p">=</span> <span class="mi">4</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">area</span><span class="p">()</span> <span class="p">-&gt;</span>  <span class="nb">Double</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">longitudLado</span> <span class="o">*</span> <span class="n">longitudLado</span>
    <span class="p">}</span>

    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">descripcionSencilla</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">&quot;Un cuadrado con lados de longitud </span><span class="si">\(</span><span class="n">longitudLado</span><span class="si">)</span><span class="s">.&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">let</span> <span class="nv">test</span> <span class="p">=</span> <span class="n">Cuadrado</span><span class="p">(</span><span class="n">longitudLado</span><span class="p">:</span> <span class="mf">5.2</span><span class="p">,</span> <span class="n">nombre</span><span class="p">:</span> <span class="s">&quot;Mi cuadrado de prueba&quot;</span><span class="p">)</span>
<span class="bp">print</span><span class="p">(</span><span class="n">test</span><span class="p">.</span><span class="n">area</span><span class="p">())</span>
<span class="bp">print</span><span class="p">(</span><span class="n">test</span><span class="p">.</span><span class="n">descripcionSencilla</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Construye otra subclase de <code>FiguraConNombre</code> llamada <code>Circulo</code> que
tome un radio y un nombre como argumentos de su
inicializador. Implementa un método <code>area()</code> y
<code>descripcionSencilla()</code> en la clase <code>Circulo</code>.</p>
</blockquote>
<p>Además de propiedades simples que se almacenan, las propiedades pueden
tener un <em>getter</em> y un <em>setter</em>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">TrianguloEquilatero</span><span class="p">:</span> <span class="n">FiguraConNombre</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">longitudLado</span><span class="p">:</span> <span class="nb">Double</span> <span class="p">=</span> <span class="mf">0.0</span>

    <span class="kd">init</span><span class="p">(</span><span class="n">longitudLado</span><span class="p">:</span> <span class="nb">Double</span><span class="p">,</span> <span class="n">nombre</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">longitudLado</span> <span class="p">=</span> <span class="n">longitudLado</span>
        <span class="kc">super</span><span class="p">.</span><span class="kd">init</span><span class="p">(</span><span class="n">nombre</span><span class="p">:</span> <span class="n">nombre</span><span class="p">)</span>
        <span class="n">numeroDeLados</span> <span class="p">=</span> <span class="mi">3</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nv">perimetro</span><span class="p">:</span> <span class="nb">Double</span> <span class="p">{</span>
        <span class="kr">get</span> <span class="p">{</span>
            <span class="k">return</span> <span class="mf">3.0</span> <span class="o">*</span> <span class="n">longitudLado</span>
        <span class="p">}</span>
        <span class="kr">set</span> <span class="p">{</span>
            <span class="n">longitudLado</span> <span class="p">=</span> <span class="n">newValue</span> <span class="o">/</span> <span class="mf">3.0</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">descripcionSencilla</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">&quot;Un triangulo equilátero con lados de longitud </span><span class="si">\(</span><span class="n">longitudLado</span><span class="si">)</span><span class="s">.&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nv">triangulo</span> <span class="p">=</span> <span class="n">TrianguloEquilatero</span><span class="p">(</span><span class="n">longitudLado</span><span class="p">:</span> <span class="mf">3.1</span><span class="p">,</span> <span class="n">nombre</span><span class="p">:</span> <span class="s">&quot;un triángulo&quot;</span><span class="p">)</span>
<span class="bp">print</span><span class="p">(</span><span class="n">triangulo</span><span class="p">.</span><span class="n">perimetro</span><span class="p">)</span>
<span class="n">triangulo</span><span class="p">.</span><span class="n">perimetro</span> <span class="p">=</span> <span class="mf">9.9</span>
<span class="bp">print</span><span class="p">(</span><span class="n">triangulo</span><span class="p">.</span><span class="n">longitudLado</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>En el <em>setter</em> de <code>perimetro</code>, el nuevo valor tiene el nombre
implícito <code>newValue</code>. Puedes proporcionar un nombre explícito en el
paréntesis después de <code>set</code>.</p>
<p>Date cuenta de que el inicializador de la clase <code>TrianguloEquilatero</code>
tiene tres pasos diferentes:</p>
<ol>
<li>Establecer el valor de las propiedades que declara la subclase.</li>
<li>Llamar al inicializador de la superclase.</li>
<li>Cambiar el valor de las propiedades definidas por la
   superclase. Cualquier trabajo adicional que use métodos, <em>getters</em>
   o <em>setters</em> puede hacerse también en este punto.</li>
</ol>
<p>Si no necesitas calcular la propiedad pero necesitas proporcionar
código que se ejecuta antes y después de establecer un nuevo valor,
usa <code>willSet</code> y <code>didSet</code>. El código que proporcionas se ejecuta cada
vez que el valor cambia fuera de un inicializador. Por ejemplo, la
siguiente clase se asegura de que la longitud del lado de su triángulo
siempre es la misma que la longitud del lado de su cuadrado.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">TrianguloYCuadrado</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">triangulo</span><span class="p">:</span> <span class="n">TrianguloEquilatero</span> <span class="p">{</span>
        <span class="kr">willSet</span> <span class="p">{</span>
            <span class="n">cuadrado</span><span class="p">.</span><span class="n">longitudLado</span> <span class="p">=</span> <span class="n">newValue</span><span class="p">.</span><span class="n">longitudLado</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nv">cuadrado</span><span class="p">:</span> <span class="n">Cuadrado</span> <span class="p">{</span>
        <span class="kr">willSet</span> <span class="p">{</span>
            <span class="n">triangulo</span><span class="p">.</span><span class="n">longitudLado</span> <span class="p">=</span> <span class="n">newValue</span><span class="p">.</span><span class="n">longitudLado</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">init</span><span class="p">(</span><span class="n">tamaño</span><span class="p">:</span> <span class="nb">Double</span><span class="p">,</span> <span class="n">nombre</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cuadrado</span> <span class="p">=</span> <span class="n">Cuadrado</span><span class="p">(</span><span class="n">longitudLado</span><span class="p">:</span> <span class="n">tamaño</span><span class="p">,</span> <span class="n">nombre</span><span class="p">:</span> <span class="n">nombre</span><span class="p">)</span>
        <span class="n">triangulo</span> <span class="p">=</span> <span class="n">TrianguloEquilatero</span><span class="p">(</span><span class="n">longitudLado</span><span class="p">:</span> <span class="n">tamaño</span><span class="p">,</span> <span class="n">nombre</span><span class="p">:</span> <span class="n">nombre</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nv">trianguloYCuadrado</span> <span class="p">=</span> <span class="n">TrianguloYCuadrado</span><span class="p">(</span><span class="n">tamaño</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">nombre</span><span class="p">:</span> <span class="s">&quot;Otra figura de prueba&quot;</span><span class="p">)</span>
<span class="bp">print</span><span class="p">(</span><span class="n">trianguloYCuadrado</span><span class="p">.</span><span class="n">cuadrado</span><span class="p">.</span><span class="n">longitudLado</span><span class="p">)</span>
<span class="bp">print</span><span class="p">(</span><span class="n">trianguloYCuadrado</span><span class="p">.</span><span class="n">triangulo</span><span class="p">.</span><span class="n">longitudLado</span><span class="p">)</span>
<span class="n">trianguloYCuadrado</span><span class="p">.</span><span class="n">cuadrado</span> <span class="p">=</span> <span class="n">Cuadrado</span><span class="p">(</span><span class="n">longitudLado</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="n">nombre</span><span class="p">:</span> <span class="s">&quot;Cuadrado mayor&quot;</span><span class="p">)</span>
<span class="bp">print</span><span class="p">(</span><span class="n">trianguloYCuadrado</span><span class="p">.</span><span class="n">triangulo</span><span class="p">.</span><span class="n">longitudLado</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Cuando trabajamos con valores opcionales, puedes escribir <code>?</code> antes de
operaciones como métodos, propiedades y subíndices. Si el valor antes
del <code>?</code> es <code>nil</code>, todo lo que hay después se ignora y el valor de la
expresión completa es <code>nil</code>. En otro caso, el valor opcional se
desenvuelve, y todo lo que hay después del <code>?</code> se realiza sobre el
valor desenvuelto. En ambos casos, el valor de la expresión completa
es un valor opcional.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">cuadradoOpcional</span><span class="p">:</span> <span class="n">Cuadrado</span><span class="p">?</span> <span class="p">=</span> <span class="n">Cuadrado</span><span class="p">(</span><span class="n">longitudLado</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span> <span class="n">nombre</span><span class="p">:</span> <span class="s">&quot;Cuadrado opcional&quot;</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">longitudLado</span> <span class="p">=</span> <span class="n">cuadradoOpcional</span><span class="p">?.</span><span class="n">longitudLado</span>
</pre></div>
</td></tr></table>

<h4>Enumeraciones y estructuras</h4>
<p>Usa <code>enum</code> para crear una enumeración. Como las clases y otros tipos
con nombre, las enumeraciones pueden tener métodos asociados.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">enum</span> <span class="nc">Valor</span><span class="p">:</span> <span class="nb">Int</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">uno</span> <span class="p">=</span> <span class="mi">1</span>
    <span class="k">case</span> <span class="n">dos</span><span class="p">,</span> <span class="n">tres</span><span class="p">,</span> <span class="n">cuatro</span><span class="p">,</span> <span class="n">cinco</span><span class="p">,</span> <span class="n">seis</span><span class="p">,</span> <span class="n">siete</span><span class="p">,</span> <span class="n">ocho</span><span class="p">,</span> <span class="n">nueve</span><span class="p">,</span> <span class="n">diez</span>
    <span class="k">case</span> <span class="n">sota</span><span class="p">,</span> <span class="n">caballo</span><span class="p">,</span> <span class="n">rey</span>
    <span class="kd">func</span> <span class="nf">descripcionSencilla</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="kc">self</span> <span class="p">{</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">uno</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;as&quot;</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">sota</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;sota&quot;</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">caballo</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;caballo&quot;</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">rey</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;rey&quot;</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">String</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">rawValue</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">let</span> <span class="nv">carta</span> <span class="p">=</span> <span class="n">Valor</span><span class="p">.</span><span class="n">uno</span>
<span class="kd">let</span> <span class="nv">valorBrutoCarta</span> <span class="p">=</span> <span class="n">carta</span><span class="p">.</span><span class="n">rawValue</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Escribe una función que compare dos valores <code>Valor</code> a través de una
comparación de sus valores brutos.</p>
</blockquote>
<p>Por defecto, Swift asigna los valores brutos comenzando en cero e
incrementándolos por uno cada vez, pero puedes cambiar esta conducta
especificando explícitamente los valores. En el ejemplo anterior, a
<code>As</code> se le da un valor bruto de <code>1</code> y el resto de los valores brutos
se asignan en orden. Puedes también usar cadenas o números en punto
flotante como valores brutos de una enumeración. Utiliza la propiedad
<code>rawValue</code> para acceder al valor bruto de una enumeración.</p>
<p>Usa el inicializador para construir un valor de una enumeración a
través de un valor bruto. Si el valor bruto no existe, el
inicializador devolverá <code>nil</code>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">if</span> <span class="kd">let</span> <span class="nv">valorConvertido</span> <span class="p">=</span> <span class="n">Valor</span><span class="p">(</span><span class="n">rawValue</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">descripcionTres</span> <span class="p">=</span> <span class="n">valorConvertido</span><span class="p">.</span><span class="n">descripcionSencilla</span><span class="p">()</span>
    <span class="bp">print</span><span class="p">(</span><span class="n">descripcionTres</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Los valores <em>case</em> de una enumeración son valores reales, no una forma
nueva de escribir sus valores brutos. De hecho, en los casos en los
que no hay un valor bruto que tenga sentido, no tienes que
proporcionar uno.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">enum</span> <span class="nc">Palo</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">oros</span><span class="p">,</span> <span class="n">bastos</span><span class="p">,</span> <span class="n">copas</span><span class="p">,</span> <span class="n">espadas</span>
    <span class="kd">func</span> <span class="nf">descripcionSencilla</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="kc">self</span> <span class="p">{</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">oros</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;oros&quot;</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">bastos</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;bastos&quot;</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">copas</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;copas&quot;</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">espadas</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;espadas&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">let</span> <span class="nv">copas</span> <span class="p">=</span> <span class="n">Palo</span><span class="p">.</span><span class="n">copas</span>
<span class="kd">let</span> <span class="nv">descripcionCopas</span> <span class="p">=</span> <span class="n">copas</span><span class="p">.</span><span class="n">descripcionSencilla</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Añade un método <code>color()</code> a <code>Palo</code> que devuelva "agresivo" para
<em>bastos</em> y <em>espadas</em> y devuelva "reflexivo" para <em>oros</em> y <em>copas</em>.</p>
</blockquote>
<p>Date cuenta de las dos formas en las que nos referimos al caso <code>copas</code>
de la enumeración anterior: cuando se asigna un valor a la constante
<code>copas</code>, nos referimos al caso de la enumeración <code>Palo.copas</code> usando
su nombre completo porque la constante no tiene un tipo explícito
especificado. Dentro del <code>switch</code>, nos referimos al caso de la
enumeración con la forma abreviada <code>.copas</code> porque ya se sabe que el
valor de <code>self</code> es un <code>Palo</code>. Puedes usar la forma abreviada en
cualquier momento en que el tipo del valor ya se conozca.</p>
<p>Una instancia de un caso de enumeración puede tener valores asociados
con la instancia. Instancias del mismo caso de enumeración pueden
tener asociados valores diferentes. Proporcionas los valores asociados
cuando creas la instancia. Los valores asociados y los valores brutos
son distintos: el valor bruto de un caso de enumeración es el mismo
para todas las instancias, mientras que proporcionas el valor asociado
cuando defines la enumeración.</p>
<p>Por ejemplo, considera el caso de realizar una petición a un servidor
de la hora de salir el sol y de la hora de ponerse el sol. El servidor
responde con la información o responde con alguna información de
error.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">enum</span> <span class="nc">RespuestaServidor</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">resultado</span><span class="p">(</span><span class="nb">String</span><span class="p">,</span> <span class="nb">String</span><span class="p">)</span>
    <span class="k">case</span> <span class="n">error</span><span class="p">(</span><span class="nb">String</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nv">exito</span> <span class="p">=</span> <span class="n">RespuestaServidor</span><span class="p">.</span><span class="n">resultado</span><span class="p">(</span><span class="s">&quot;6:00 am&quot;</span><span class="p">,</span> <span class="s">&quot;8:09 pm&quot;</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">fallo</span> <span class="p">=</span> <span class="n">RespuestaServidor</span><span class="p">.</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;Sin queso.&quot;</span><span class="p">)</span>

<span class="k">switch</span> <span class="n">exito</span> <span class="p">{</span>
    <span class="k">case</span> <span class="kd">let</span> <span class="p">.</span><span class="n">resultado</span><span class="p">(</span><span class="n">salidaSol</span><span class="p">,</span> <span class="n">puestaSol</span><span class="p">):</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;La salida del sol es a las </span><span class="si">\(</span><span class="n">salidaSol</span><span class="si">)</span><span class="s"> y la puesta es a </span><span class="si">\(</span><span class="n">puestaSol</span><span class="si">)</span><span class="s">.&quot;</span><span class="p">)</span>
    <span class="k">case</span> <span class="kd">let</span> <span class="p">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Fallo...  </span><span class="si">\(</span><span class="n">error</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Añade un tercer caso al <code>ServerResponse</code> y al switch.</p>
</blockquote>
<p>Date cuenta de cómo la hora de salir el sol y de ponerse el sol se
extraen del <code>ServerResponse</code> como parte del emparejamiento entre el
valor y los casos switch.</p>
<p>Usa <code>struct</code> para crear una estructura. Las estructuras comparten
muchas características de las clases, incluyendo métodos e
inicializadores. Una de las diferencias más importantes entre
estructuras y clases es que las estructuras siempre se copian cuando
las pasas en tu código, mientras que las clases se pasan por
referencia.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">struct</span> <span class="nc">Carta</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">valor</span><span class="p">:</span> <span class="n">Valor</span>
    <span class="kd">var</span> <span class="nv">palo</span><span class="p">:</span> <span class="n">Palo</span>
    <span class="kd">func</span> <span class="nf">descripcionSencilla</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">&quot;El </span><span class="si">\(</span><span class="n">valor</span><span class="p">.</span><span class="n">descripcionSencilla</span><span class="si">())</span><span class="s"> de </span><span class="si">\(</span><span class="n">palo</span><span class="p">.</span><span class="n">descripcionSencilla</span><span class="si">())</span><span class="s">&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">let</span> <span class="nv">tresDeEspadas</span> <span class="p">=</span> <span class="n">Carta</span><span class="p">(</span><span class="n">valor</span><span class="p">:</span> <span class="p">.</span><span class="n">tres</span><span class="p">,</span> <span class="n">palo</span><span class="p">:</span> <span class="p">.</span><span class="n">espadas</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">descripcionTresDeEspadas</span> <span class="p">=</span> <span class="n">tresDeEspadas</span><span class="p">.</span><span class="n">descripcionSencilla</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Añade un método a <code>Carta</code> que cree un mazo completo de cartas, con
una carta de cada combinación de valor y palo.</p>
</blockquote>
<h4>Protocolos y extensiones</h4>
<p>Usa <code>protocol</code> para declarar un protocolo.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">protocol</span> <span class="nc">ProtocoloEjemplo</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">descripcionSencilla</span><span class="p">:</span> <span class="nb">String</span> <span class="p">{</span> <span class="kr">get</span> <span class="p">}</span>
    <span class="kr">mutating</span> <span class="kd">func</span> <span class="nf">ajustar</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Clases, enumeraciones y estructuras pueden todas adoptar protocolos.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">ClaseSencilla</span><span class="p">:</span> <span class="n">ProtocoloEjemplo</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">descripcionSencilla</span><span class="p">:</span> <span class="nb">String</span> <span class="p">=</span> <span class="s">&quot;Una clase muy simple.&quot;</span>
    <span class="kd">var</span> <span class="nv">otraPropiedad</span><span class="p">:</span> <span class="nb">Int</span> <span class="p">=</span> <span class="mi">69105</span>
    <span class="kd">func</span> <span class="nf">ajustar</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">descripcionSencilla</span> <span class="o">+=</span> <span class="s">&quot;  Ahora 100% ajustada.&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nv">a</span> <span class="p">=</span> <span class="n">ClaseSencilla</span><span class="p">()</span>
<span class="n">a</span><span class="p">.</span><span class="n">ajustar</span><span class="p">()</span>
<span class="kd">let</span> <span class="nv">descripcionA</span> <span class="p">=</span> <span class="n">a</span><span class="p">.</span><span class="n">descripcionSencilla</span>

<span class="kd">struct</span> <span class="nc">EstructuraSencilla</span><span class="p">:</span> <span class="n">ProtocoloEjemplo</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">descripcionSencilla</span><span class="p">:</span> <span class="nb">String</span> <span class="p">=</span> <span class="s">&quot;Una estructura sencilla&quot;</span>
    <span class="kr">mutating</span> <span class="kd">func</span> <span class="nf">ajustar</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">descripcionSencilla</span> <span class="o">+=</span> <span class="s">&quot; (ajustada)&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nv">b</span> <span class="p">=</span> <span class="n">EstructuraSencilla</span><span class="p">()</span>
<span class="n">b</span><span class="p">.</span><span class="n">ajustar</span><span class="p">()</span>
<span class="kd">let</span> <span class="nv">descripcionB</span> <span class="p">=</span> <span class="n">b</span><span class="p">.</span><span class="n">descripcionSencilla</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Escribe una enumeración que cumpla el protocolo.</p>
</blockquote>
<p>Date cuenta del uso de la palabra clave <code>mutating</code> en la declaración
de <code>EstructuraSencilla</code> para marcar el método que modifica la
estructura. La declaración de <code>ClaseSencilla</code> no necesita que se marquen
como mutadores ninguno de sus métodos porque los métodos en una clase
siempre pueden modificar la clase.</p>
<p>Usa <code>extension</code> para añadir funcionalidad a un tipo existente, como
métodos nuevos y propiedades calculadas. Puedes utilizar una extensión
para añadir un cumplimiento de un protocolo a un tipo que se declara
en otro lugar, o incluso a un tipo que hayas importado de una
biblioteca o un <em>framework</em>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">extension</span> <span class="nc">Int</span><span class="p">:</span> <span class="n">ProtocoloEjemplo</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">descripcionSencilla</span><span class="p">:</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">&quot;El número </span><span class="si">\(</span><span class="kc">self</span><span class="si">)</span><span class="s">&quot;</span>
    <span class="p">}</span>
    <span class="kr">mutating</span> <span class="kd">func</span> <span class="nf">ajustar</span><span class="p">()</span> <span class="p">{</span>
        <span class="kc">self</span> <span class="o">+=</span> <span class="mi">42</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="bp">print</span><span class="p">(</span><span class="mf">7.</span><span class="n">descripcionSencilla</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Otro ejemplo usando una función:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">extension</span> <span class="nc">Int</span> <span class="p">{</span> 
    <span class="kd">func</span> <span class="nf">repetir</span><span class="p">(</span><span class="n">task</span><span class="p">:</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="p">())</span> <span class="p">{</span> 
        <span class="k">for</span> <span class="kc">_</span> <span class="k">in</span> <span class="mf">0.</span><span class="p">..</span><span class="kc">self</span> <span class="p">{</span> 
            <span class="n">task</span><span class="p">()</span> 
        <span class="p">}</span> 
    <span class="p">}</span> 
<span class="p">}</span> 

<span class="mf">10.</span><span class="n">repetir</span> <span class="p">{</span><span class="bp">print</span><span class="p">(</span><span class="s">&quot;Hola&quot;</span><span class="p">)}</span>
</pre></div>
</td></tr></table>

<blockquote>
<p>EXPERIMENTO<br />
Escribe una extensión para el tipo <code>Double</code> que añada una propiedad
<code>absoluteValue</code>.</p>
</blockquote>
<p>Puedes usar un nombre de un protocolo de la misma forma que cualquier
otro tipo con nombre; por ejemplo, para crear una colección de objetos
que tienen tipos diferentes pero que cumplen un único
protocolo. Cuando trabajas con valores cuyo tipo es un tipo de
protocolo, no están disponibles los métodos fuera del protocolo.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">valorProtocolo</span><span class="p">:</span> <span class="n">ProtocoloEjemplo</span> <span class="p">=</span> <span class="n">a</span>
<span class="bp">print</span><span class="p">(</span><span class="n">valorProtocolo</span><span class="p">.</span><span class="n">descripcionSencilla</span><span class="p">)</span>
<span class="c1">// print(valorProtocolo.otraPropiedad)  // Descomentar para comprobar el error</span>
</pre></div>
</td></tr></table>

<p>Incluso aunque la variable <code>valorProtocolo</code> tenga un tipo en tiempo de
ejecución de <code>ClaseSencilla</code>, el compilador lo trata como uno del tipo
<code>ProtocoloEjemplo</code>. De esta forma no es posible acceder
accidentalmente a métodos o propiedades que implemente la clase de
forma adicional al cumplimiento del protocolo.</p>
<h4>Genéricos</h4>
<p>Escribe un nombre dentro de paréntesis angulares para construir una
función o un tipo genérico.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">func</span> <span class="nf">itemRepetido</span><span class="p">&lt;</span><span class="n">Item</span><span class="p">&gt;(</span><span class="kc">_</span> <span class="n">item</span><span class="p">:</span> <span class="n">Item</span><span class="p">,</span> <span class="n">numeroDeVeces</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="p">[</span><span class="n">Item</span><span class="p">]</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">resultado</span> <span class="p">=</span> <span class="p">[</span><span class="n">Item</span><span class="p">]()</span>
    <span class="k">for</span> <span class="kc">_</span> <span class="k">in</span> <span class="mf">0.</span><span class="p">.&lt;</span><span class="n">numeroDeVeces</span> <span class="p">{</span>
        <span class="n">resultado</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">resultado</span>
<span class="p">}</span>
<span class="bp">print</span><span class="p">(</span><span class="n">itemRepetido</span><span class="p">(</span><span class="s">&quot;knock&quot;</span><span class="p">,</span> <span class="n">numeroDeVeces</span><span class="p">:</span><span class="mi">4</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<p>Puedes hacer formas genéricas de funciones y métodos, así como de
clases, enumeraciones y estructuras.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1">// Reimplementamos el tipo Optional de la biblioteca estándar de Swift</span>
<span class="kd">enum</span> <span class="nc">ValorOpcional</span><span class="p">&lt;</span><span class="n">Envuelto</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">ninguno</span>
    <span class="k">case</span> <span class="n">alguno</span><span class="p">(</span><span class="n">Envuelto</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nv">posibleInteger</span><span class="p">:</span> <span class="n">ValorOpcional</span><span class="p">&lt;</span><span class="nb">Int</span><span class="p">&gt;</span> <span class="p">=</span> <span class="p">.</span><span class="n">ninguno</span>
<span class="n">posibleInteger</span> <span class="p">=</span> <span class="p">.</span><span class="n">alguno</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Es posible usar <code>where</code> justo antes del cuerpo para especificar una
lista de requisitos. Por ejemplo, para requerir el tipo que debe
implementar un protocolo, para requerir que dos tipos sean los mismos
o para requerir que una clase tenga una superclase determinada.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">func</span> <span class="nf">elementosComunes</span><span class="p">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">,</span> <span class="n">U</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">&gt;(</span><span class="kc">_</span> <span class="n">izq</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="kc">_</span> <span class="n">der</span><span class="p">:</span> <span class="n">U</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span>
    <span class="k">where</span> <span class="n">T</span><span class="p">.</span><span class="n">Iterator</span><span class="p">.</span><span class="n">Element</span><span class="p">:</span> <span class="nb">Equatable</span><span class="p">,</span> <span class="n">T</span><span class="p">.</span><span class="n">Iterator</span><span class="p">.</span><span class="n">Element</span> <span class="p">==</span> <span class="n">U</span><span class="p">.</span><span class="n">Iterator</span><span class="p">.</span><span class="n">Element</span> <span class="p">{</span>
        <span class="k">for</span> <span class="n">izqItem</span> <span class="k">in</span> <span class="n">izq</span> <span class="p">{</span>
            <span class="k">for</span> <span class="n">derItem</span> <span class="k">in</span> <span class="n">der</span> <span class="p">{</span>
                <span class="k">if</span> <span class="n">izqItem</span> <span class="p">==</span> <span class="n">derItem</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">true</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">false</span>
<span class="p">}</span>

<span class="bp">print</span><span class="p">(</span><span class="n">elementosComunes</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
</pre></div>
</td></tr></table>

<p>Si se escribe <code>&lt;T: Equatable&gt;</code> es equivalente a escribir <code>&lt;T&gt; ... where T: Equatable</code>.</p>
<h2 id="bibliografia-y-referencias">Bibliografía y referencias<a class="headerlink" href="#bibliografia-y-referencias" title="Permanent link">&para;</a></h2>
<ul>
<li>Documentación sobre Swift<ul>
<li><a href="https://developer.apple.com/library/prerelease/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html">The Swift Programming Language (html)</a></li>
<li><a href="https://developer.apple.com/swift/resources/">Recursos Swift en Apple</a></li>
<li><a href="https://swift.org">swift.org</a></li>
</ul>
</li>
<li>Swift Open Source<ul>
<li><a href="https://github.com/apple/swift">Repositorio <code>swift</code> en GitHub</a>: repositorio principal de Swift, que contiene el código fuente del compilador Swift, la biblioteca estándar y SourceKit.</li>
<li><a href="https://github.com/apple/swift-evolution">Repositorio <code>swift-evolution</code> en GitHub</a>: documentos relacionados con la evolución continua de Swift, incluyendo objetivos de las próximas versiones y propuestas de cambios y extensiones de Swift.</li>
</ul>
</li>
</ul>
<hr />
<p>Lenguajes y Paradigmas de Programación, curso 2018-19<br />
Departamento Ciencia de la Computación e Inteligencia Artificial, Universidad de Alicante  </p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>