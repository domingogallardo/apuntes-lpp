
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.5">
    
    
      
        <title>Práctica 12: Programación Orientada a Objetos en Swift (2) - LPP</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bde7dde4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ef6f36e2.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-12-programacion-orientada-a-objetos-en-swift-2" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="LPP" class="md-header__button md-logo" aria-label="LPP" data-md-component="logo">
      
  <img src="../../imagenes/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LPP
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Práctica 12: Programación Orientada a Objetos en Swift (2)
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Limpiar" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="LPP" class="md-nav__button md-logo" aria-label="LPP" data-md-component="logo">
      
  <img src="../../imagenes/logo.png" alt="logo">

    </a>
    LPP
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        Teoría
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Teoría" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Teoría
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../teoria/tema00-descripcion-asignatura/tema00-descripcion-asignatura.html" class="md-nav__link">
        Descripción de la asignatura
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../teoria/tema01-historia-lenguajes-programacion/tema01-historia-lenguajes-programacion.html" class="md-nav__link">
        Tema 1: Historia de los lenguajes de programación
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../teoria/tema02-programacion-funcional/tema02-programacion-funcional.html" class="md-nav__link">
        Tema 2: Programación funcional
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Seminarios
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Seminarios" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Seminarios
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../seminarios/seminario1-scheme/seminario1-scheme.html" class="md-nav__link">
        Seminario de Scheme
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Prácticas
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Prácticas" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Prácticas
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../practica01/practica01.html" class="md-nav__link">
        Práctica 1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../practica02/practica02.html" class="md-nav__link">
        Práctica 2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../practica03/practica03.html" class="md-nav__link">
        Práctica 3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../practica04/practica04.html" class="md-nav__link">
        Práctica 4
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#entrega-de-la-practica" class="md-nav__link">
    Entrega de la práctica
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejercicios" class="md-nav__link">
    Ejercicios
  </a>
  
    <nav class="md-nav" aria-label="Ejercicios">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ejercicio-1" class="md-nav__link">
    Ejercicio 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejercicio-2" class="md-nav__link">
    Ejercicio 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejercicio-3" class="md-nav__link">
    Ejercicio 3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejercicio-4" class="md-nav__link">
    Ejercicio 4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejercicio-5" class="md-nav__link">
    Ejercicio 5
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="practica-12-programacion-orientada-a-objetos-en-swift-2">Práctica 12: Programación Orientada a Objetos en Swift (2)<a class="headerlink" href="#practica-12-programacion-orientada-a-objetos-en-swift-2" title="Permanent link">&para;</a></h1>
<h2 id="entrega-de-la-practica">Entrega de la práctica<a class="headerlink" href="#entrega-de-la-practica" title="Permanent link">&para;</a></h2>
<p>Para entregar la práctica debes subir a Moodle el fichero
<code>practica12.swift</code> con una cabecera inicial con tu nombre y apellidos,
y las soluciones de cada ejercicio separadas por comentarios.</p>
<h2 id="ejercicios">Ejercicios<a class="headerlink" href="#ejercicios" title="Permanent link">&para;</a></h2>
<h3 id="ejercicio-1">Ejercicio 1<a class="headerlink" href="#ejercicio-1" title="Permanent link">&para;</a></h3>
<p>a) Completa el código de la estructura ​<code>MiStruct</code>​ para que compile
correctamente. Hazlo primero en papel y después pruébalo en el
compilador.</p>
<div class="highlight"><pre><span></span><code><span class="kd">protocol</span> <span class="nc">A</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">a</span><span class="p">:</span> <span class="nb">String</span> <span class="p">{</span><span class="kr">get</span><span class="p">}</span>
    <span class="kd">func</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">String</span><span class="p">?</span>
<span class="p">}</span>
<span class="kd">protocol</span> <span class="nc">B</span> <span class="p">{</span>
    <span class="kr">mutating</span> <span class="kd">func</span> <span class="nf">bar</span><span class="p">()</span>
<span class="p">}</span>
<span class="kd">struct</span> <span class="nc">MiStruct</span><span class="p">:</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span> <span class="p">{</span>
    <span class="c1">// Completa el código</span>
<span class="p">}</span>
</code></pre></div>
<p>b) El siguiente código tiene errores. Intenta descubrir cuáles son sin
utilizar el compilador. Prueba distintas formas de arreglar el código
cambiando lo mínimo posible de lo ya definido (por ejemplo, no debes
añadir nuevas propiedades en <code>MiStruct</code>). Compruébalo con el compilador.</p>
<div class="highlight"><pre><span></span><code><span class="kd">protocol</span> <span class="nc">A</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">a</span><span class="p">:</span> <span class="nb">String</span> <span class="p">{</span><span class="kr">get</span> <span class="kr">set</span><span class="p">}</span>
    <span class="kd">func</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Int</span><span class="p">?</span>
<span class="p">}</span>

<span class="kd">protocol</span> <span class="nc">B</span> <span class="p">{</span>
    <span class="kr">mutating</span> <span class="kd">func</span> <span class="nf">bar</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="nc">MiStruct</span><span class="p">:</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">a</span> <span class="p">=</span> <span class="mi">10</span>
    <span class="kd">func</span> <span class="nf">foo</span><span class="p">(</span><span class="n">valor1</span> <span class="n">a</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="n">valor2</span> <span class="n">b</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Int</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">res</span> <span class="p">=</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="p">?</span> <span class="n">a</span><span class="p">:</span> <span class="n">b</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>c) Supongamos la estructura <code>Equipo</code> que aparece a continuación que
representa un equipo en una competición deportiva: </p>
<div class="highlight"><pre><span></span><code><span class="kd">struct</span> <span class="nc">Equipo</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">puntos</span><span class="p">:</span> <span class="nb">Int</span>
    <span class="kd">let</span> <span class="nv">nombre</span><span class="p">:</span> <span class="nb">String</span>
<span class="p">}</span>
</code></pre></div>
<p>Modifica la definición para poder comprobar la igualdad de dos equipos y
que el siguiente código funcione correctamente:</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nv">equipo1</span> <span class="p">=</span> <span class="n">Equipo</span><span class="p">(</span><span class="n">puntos</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">nombre</span><span class="p">:</span> <span class="s">&quot;Hércules&quot;</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">equipo2</span> <span class="p">=</span> <span class="n">Equipo</span><span class="p">(</span><span class="n">puntos</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="n">nombre</span><span class="p">:</span> <span class="s">&quot;Villareal&quot;</span><span class="p">)</span>
<span class="bp">print</span><span class="p">(</span><span class="n">equipo1</span> <span class="p">==</span> <span class="n">equipo2</span><span class="p">)</span> <span class="c1">// imprime false</span>
</code></pre></div>
<p>Después, modifica el código otra vez para que la estructura se ajuste
también al protocolo <code>Comparable</code> para poder comparar dos equipos
. Consulta el protocolo en <a href="https://developer.apple.com/documentation/swift/comparable">documentación de
Swift</a>. Un
equipo será menor que otro cuando tenga menos puntos. En el caso en
que ambos tengan los mismos puntos, será menor el que tenga menor
nombre en orden alfabético.</p>
<div class="highlight"><pre><span></span><code><span class="bp">print</span><span class="p">(</span><span class="n">equipo1</span> <span class="o">&gt;</span> <span class="n">equipo2</span><span class="p">)</span> <span class="c1">// imprime true</span>
</code></pre></div>
<p>Una vez definidos los operadores necesarios comprueba que funcionan
correctamente creando varios equipos, insertándolos en un array y
llamando al método <code>sorted</code>.</p>
<h3 id="ejercicio-2">Ejercicio 2<a class="headerlink" href="#ejercicio-2" title="Permanent link">&para;</a></h3>
<p>En este ejercicio deberás implementar un conjunto de clases con las
que podamos "simular" una carrera de coches.</p>
<h4 id="funcion-intrandomin">Función <code>Int.random(in:)</code><a class="headerlink" href="#funcion-intrandomin" title="Permanent link">&para;</a></h4>
<p>Utilizaremos la función del sistema
<a href="https://developer.apple.com/documentation/swift/int/2995648-random"><code>Int.random(in:)</code></a>
que devuelve un número aleatorio entero en un rango. Por ejemplo, el
siguiente código devuelve un número aleatorio entre 1 y 99</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="kc">_</span> <span class="k">in</span> <span class="mf">1.</span><span class="p">..</span><span class="mi">3</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="nb">Int</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="k">in</span><span class="p">:</span> <span class="mf">1.</span><span class="p">..</span><span class="mi">99</span><span class="p">))</span>
<span class="p">}</span>
<span class="c1">// Prints &quot;53&quot;</span>
<span class="c1">// Prints &quot;64&quot;</span>
<span class="c1">// Prints &quot;5&quot;</span>
</code></pre></div>
<p>A continuación puedes ver un ejemplo de su utilización en un método de
tipo del enumerado <code>MarcaCoche</code> para devolver una marca aleatoria de
coche:</p>
<div class="highlight"><pre><span></span><code><span class="kd">enum</span> <span class="nc">MarcaCoche</span><span class="p">:</span> <span class="nb">Int</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">Mercedes</span><span class="p">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">Ferrari</span><span class="p">,</span> <span class="n">RedBull</span><span class="p">,</span> <span class="n">McLaren</span>

    <span class="kd">static</span> <span class="kd">func</span> <span class="nf">random</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="n">MarcaCoche</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">maxValue</span> <span class="p">=</span> <span class="n">McLaren</span><span class="p">.</span><span class="n">rawValue</span>

        <span class="kd">let</span> <span class="nv">r</span> <span class="p">=</span> <span class="nb">Int</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="k">in</span><span class="p">:</span> <span class="mf">0.</span><span class="p">..</span><span class="n">maxValue</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">MarcaCoche</span><span class="p">(</span><span class="n">rawValue</span><span class="p">:</span> <span class="n">r</span><span class="p">)</span><span class="o">!</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
<h4 id="enumerados-y-clases-que-gestionan-los-vehiculos">Enumerados y clases que gestionan los vehículos<a class="headerlink" href="#enumerados-y-clases-que-gestionan-los-vehiculos" title="Permanent link">&para;</a></h4>
<p>Deberás implementar los siguientes enumerados y clases, con las propiedades indicadas.</p>
<p><strong>Enumerado <code>MarcaCoche</code></strong> </p>
<ul>
<li>Posibles valores: <code>Mercedes</code>, <code>Ferrari</code>, <code>RedBull</code> y <code>McLaren</code></li>
<li>Método del tipo <code>random()</code> que devuelva aleatoriamente uno de los
  valores (consultar el código anterior).</li>
</ul>
<p><strong>Enumerado <code>TipoCambio</code></strong></p>
<ul>
<li>Posibles valores: <code>Automatico</code> o <code>Manual</code></li>
<li>Método del tipo <code>random()</code> que devuelve uno de esos valores.</li>
</ul>
<p><strong>Clase base <code>Coche</code></strong></p>
<ul>
<li>Propiedades de instancia almacenadas: <code>velocidadActual</code> (<code>Double</code>),
  <code>marcha</code> (<code>Int</code>), <code>distanciaRecorrida</code> (<code>Double</code>) y <code>marca</code>
  (<code>MarcaCoche</code>).</li>
<li>Propiedad de instancia calculada: <code>descripcion</code> (<code>String</code>), que
  devuelve la marca del coche.</li>
<li>Propiedades del tipo: Constantes <code>velocidadMaxima</code> (<code>Double</code>) y
  <code>marchaMaxima</code> (<code>Int</code>) inicializadas a 150.0 y 6</li>
</ul>
<p><strong>Subclase <code>CocheAutomatico</code></strong></p>
<ul>
<li>Hereda de <code>Coche</code> y sobreescribe la descripción, añadiendo la cadena
  "Automático".</li>
</ul>
<p><strong>Subclase <code>CocheManual</code></strong></p>
<ul>
<li>Hereda de <code>Coche</code> y sobreescribe la descripción, añadiendo la cadena
  "Manual".</li>
</ul>
<p><strong>Observadores de propiedades en las subclases</strong></p>
<p>La velocidad de un coche manual se modifica cambiando su propiedad
<code>marcha</code> y la de un coche automático cambiando su propiedad
<code>velocidadActual</code>. En cada caso hay que definir observadores de
propiedades que modifiquen la otra propiedad.</p>
<p>La velocidad se calcula a partir de la marcha según la siguiente expresión:</p>
<div class="highlight"><pre><span></span><code><span class="n">velocidadActual</span> <span class="p">=</span> <span class="mf">25.0</span> <span class="o">*</span> <span class="n">marcha</span>
</code></pre></div>
<p>Y la marcha se calcula a partir de la velocidad con la expresión que
puedes encontrar en los apuntes de teoría, en la definición de la
clase <code>CocheAutomatico</code>.</p>
<p><strong>Distancia recorrida e información en pantalla</strong></p>
<p>Suponemos que se cambia la velocidad del coche cada hora y que en cada
cambio de velocidad se actualiza la propiedad <code>distanciaRecorrida</code>,
que irá acumulando la distancia recorrida por el coche desde su
inicialización. Cada vez que se cambia la velocidad también se
imprimirá la velocidad actual y la marca del coche en pantalla (ver el
ejemplo al final del ejercicio). Esto se puede implementar también en
los observadores.</p>
<h4 id="clase-carrera">Clase Carrera<a class="headerlink" href="#clase-carrera" title="Permanent link">&para;</a></h4>
<p>Debes implementar las clases anteriores y una clase <code>Carrera</code> con la
que simular una carrera de <code>n</code> coches que conducen durante <code>k</code> horas.</p>
<p>Un ejemplo de uso de la clase <code>Carrera</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nv">carrera</span> <span class="p">=</span> <span class="n">Carrera</span><span class="p">(</span><span class="n">numCoches</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">horas</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span>
<span class="bp">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Descripción de la carrera:&quot;</span><span class="p">)</span>
<span class="n">carrera</span><span class="p">.</span><span class="n">descripcion</span><span class="p">()</span>
<span class="bp">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">!!! Comienza la carrera !!!&quot;</span><span class="p">)</span>
<span class="n">carrera</span><span class="p">.</span><span class="n">empezar</span><span class="p">()</span>
<span class="bp">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">!!! Clasificación !!!&quot;</span><span class="p">)</span>
<span class="n">carrera</span><span class="p">.</span><span class="n">clasificacion</span><span class="p">()</span>
</code></pre></div>
<p>Y su correspondiente salida por pantalla:</p>
<div class="highlight"><pre><span></span><code>Descripción de la carrera:
2 coches con una duración de 3 horas
 McLaren Automatico
 Mercedes Manual

!!! Comienza la carrera !!!

Horas transcurridas 1
McLaren Automatico viajando a 141.0 kilómetros por hora con la marcha 6
Mercedes Manual viajando a 25.0 kilómetros por hora con la marcha 1

Horas transcurridas 2
McLaren Automatico viajando a 114.0 kilómetros por hora con la marcha 5
Mercedes Manual viajando a 25.0 kilómetros por hora con la marcha 1

Horas transcurridas 3
McLaren Automatico viajando a 105.0 kilómetros por hora con la marcha 5
Mercedes Manual viajando a 100.0 kilómetros por hora con la marcha 4

!!! Clasificación !!!
1. McLaren Automatico (360.0 kilómetros recorridos)
2. Mercedes Manual (150.0 kilómetros recorridos)
</code></pre></div>
<h3 id="ejercicio-3">Ejercicio 3<a class="headerlink" href="#ejercicio-3" title="Permanent link">&para;</a></h3>
<p>a) Completa el bucle con el código que comprueba el tipo de la variable
<code>i</code> e imprime su propiedad <code>p</code> y su propiedad <code>a1</code> o <code>a2</code>, dependiendo
de su tipo.</p>
<div class="highlight"><pre><span></span><code><span class="kd">protocol</span> <span class="nc">P</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nv">p</span><span class="p">:</span> <span class="nb">Int</span> <span class="p">{</span> <span class="kr">get</span> <span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">A1</span><span class="p">:</span> <span class="n">P</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nv">p</span> <span class="p">=</span> <span class="mi">0</span>
   <span class="kd">var</span> <span class="nv">a1</span> <span class="p">=</span> <span class="mi">0</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">A2</span><span class="p">:</span> <span class="n">P</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nv">p</span> <span class="p">=</span> <span class="mi">1</span>
   <span class="kd">var</span> <span class="nv">a2</span> <span class="p">=</span> <span class="mi">0</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nv">array</span><span class="p">:</span> <span class="p">[</span><span class="n">P</span><span class="p">]</span> <span class="p">=</span> <span class="p">[</span><span class="n">A1</span><span class="p">(),</span> <span class="n">A2</span><span class="p">()]</span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">array</span> <span class="p">{</span>

   <span class="c1">// Código a completar</span>
   <span class="c1">//</span>
<span class="p">}</span>

<span class="c1">// debe imprimir:</span>
<span class="c1">// debe imprimir:</span>
<span class="c1">// p: 0, a1: 0</span>
<span class="c1">// p: 1, a2: 0</span>
</code></pre></div>
<p>b) Completa el código que hay a continuación para que compile
correctamente y aparezca en pantalla el resultado que se muestra.</p>
<p>Resultado:</p>
<div class="highlight"><pre><span></span><code><span class="mf">0.0</span>
<span class="mf">300.0</span>
</code></pre></div>
<p>Código:</p>
<div class="highlight"><pre><span></span><code><span class="kd">protocol</span> <span class="nc">TieneVelocidad</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">velocidadActual</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">Double</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Vehiculo</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">velocidad</span> <span class="p">=</span> <span class="mf">0.0</span>
    <span class="kd">func</span> <span class="nf">velocidadActual</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">Double</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">velocidad</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Tren</span> <span class="p">{</span>
    <span class="kd">static</span> <span class="kd">let</span> <span class="nv">velocidadEnMarcha</span> <span class="p">=</span> <span class="mf">300.0</span>
    <span class="kd">var</span> <span class="nv">pasajeros</span> <span class="p">=</span> <span class="mi">0</span>
    <span class="kd">var</span> <span class="nv">enMarcha</span> <span class="p">=</span> <span class="kc">false</span>
<span class="p">}</span>

<span class="c1">//</span>
<span class="c1">// Código a completar</span>
<span class="c1">//</span>

<span class="kd">var</span> <span class="nv">vehiculo1</span> <span class="p">=</span> <span class="n">Vehiculo</span><span class="p">()</span>
<span class="kd">var</span> <span class="nv">tren1</span> <span class="p">=</span> <span class="n">Tren</span><span class="p">()</span>
<span class="n">tren1</span><span class="p">.</span><span class="n">enMarcha</span> <span class="p">=</span> <span class="kc">true</span>

<span class="kd">let</span> <span class="nv">transportes</span><span class="p">:</span> <span class="p">[</span><span class="n">TieneVelocidad</span><span class="p">]</span> <span class="p">=</span> <span class="p">[</span><span class="n">vehiculo1</span><span class="p">,</span> <span class="n">tren1</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">transportes</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">velocidadActual</span><span class="p">())</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="ejercicio-4">Ejercicio 4<a class="headerlink" href="#ejercicio-4" title="Permanent link">&para;</a></h3>
<p>Define una estructura <code>Timer</code> con la que podamos ejecutar el siguiente
código sin errores. El temporizador se inicializa con un número
determinado de segundos y define un método de instancia <code>paso()</code> que
descuenta un segundo. Fíjate en el código y verás que es posible sumar
temporizadores. Por último, el atributo del tipo <code>pasosTotales</code> guarda
el número de pasos que se han realizado en todas las instancias.</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nv">t1</span> <span class="p">=</span> <span class="n">Timer</span><span class="p">(</span><span class="n">segundos</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span>
<span class="kd">var</span> <span class="nv">t2</span> <span class="p">=</span> <span class="n">Timer</span><span class="p">(</span><span class="n">segundos</span><span class="p">:</span> <span class="mi">5</span><span class="p">)</span>
<span class="k">for</span> <span class="kc">_</span> <span class="k">in</span> <span class="mf">0.</span><span class="p">..</span><span class="mi">4</span> <span class="p">{</span>
    <span class="n">t1</span><span class="p">.</span><span class="n">paso</span><span class="p">()</span>
<span class="p">}</span>
<span class="k">for</span> <span class="kc">_</span> <span class="k">in</span> <span class="mf">0.</span><span class="p">..</span><span class="mi">2</span> <span class="p">{</span>
    <span class="n">t2</span><span class="p">.</span><span class="n">paso</span><span class="p">()</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nv">t3</span> <span class="p">=</span> <span class="n">t1</span> <span class="o">+</span> <span class="n">t2</span>
<span class="n">t3</span><span class="p">.</span><span class="n">paso</span><span class="p">()</span>
<span class="bp">print</span><span class="p">(</span><span class="s">&quot;Segundos del temporizador 1: </span><span class="si">\(</span><span class="n">t1</span><span class="p">.</span><span class="n">segundos</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="bp">print</span><span class="p">(</span><span class="s">&quot;Segundos del temporizador 2: </span><span class="si">\(</span><span class="n">t2</span><span class="p">.</span><span class="n">segundos</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="bp">print</span><span class="p">(</span><span class="s">&quot;Segundos del temporizador 3: </span><span class="si">\(</span><span class="n">t3</span><span class="p">.</span><span class="n">segundos</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="bp">print</span><span class="p">(</span><span class="s">&quot;Pasos totales: </span><span class="si">\(</span><span class="n">Timer</span><span class="p">.</span><span class="n">pasosTotales</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="c1">// Imprime:</span>
<span class="c1">// Segundos del temporizador 1: 5</span>
<span class="c1">// Segundos del temporizador 2: 2</span>
<span class="c1">// Segundos del temporizador 3: 6</span>
<span class="c1">// Pasos totales: 9</span>
</code></pre></div>
<h3 id="ejercicio-5">Ejercicio 5<a class="headerlink" href="#ejercicio-5" title="Permanent link">&para;</a></h3>
<p>Vamos, por último, con un ejercicio en el que veremos otra forma de
trabajar con figuras geométricas.</p>
<h4 id="1-completa-el-codigo-inicial">1. Completa el código inicial<a class="headerlink" href="#1-completa-el-codigo-inicial" title="Permanent link">&para;</a></h4>
<p>Comienza incluyendo en la práctica el código de las definiciones
de las estructuras geométricas: <code>Punto</code>, <code>Tamaño</code>, <code>Rectangulo</code> y
<code>Circulo</code>. Debes completar el código para que haga lo indicado en los
comentarios.</p>
<div class="highlight"><pre><span></span><code><span class="kd">struct</span> <span class="nc">Punto</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">x</span> <span class="p">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span> <span class="p">=</span> <span class="mf">0.0</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="nc">Tamaño</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">ancho</span> <span class="p">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">alto</span> <span class="p">=</span> <span class="mf">0.0</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="nc">Circulo</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">centro</span> <span class="p">=</span> <span class="n">Punto</span><span class="p">()</span>
    <span class="kd">var</span> <span class="nv">radio</span> <span class="p">=</span> <span class="mf">0.0</span>

    <span class="kd">var</span> <span class="nv">area</span><span class="p">:</span> <span class="nb">Double</span> <span class="p">{</span>
        <span class="c1">// Propiedad calculada que devuelve el </span>
        <span class="c1">// área del círculo y modifica el radio</span>
        <span class="c1">// cuando se actualiza</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="nc">Rectangulo</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">origen</span> <span class="p">=</span> <span class="n">Punto</span><span class="p">()</span>
    <span class="kd">var</span> <span class="nv">tamaño</span> <span class="p">=</span> <span class="n">Tamaño</span><span class="p">()</span>

    <span class="kd">var</span> <span class="nv">centro</span><span class="p">:</span> <span class="n">Punto</span> <span class="p">{</span>
        <span class="c1">// Propiedad calculada que devuelve el </span>
        <span class="c1">// centro del rectángulo y traslada su</span>
        <span class="c1">// origen cuando se modifica</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nv">area</span><span class="p">:</span> <span class="nb">Double</span> <span class="p">{</span>
        <span class="c1">// Propiedad calculada que devuelve el</span>
        <span class="c1">// área del rectángulo</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Prueba las clases escribiendo algún código en el que se creen algunas
instancias y se actualicen sus propiedades.</p>
<h4 id="2-define-el-protocolo-figura">2. Define el protocolo figura<a class="headerlink" href="#2-define-el-protocolo-figura" title="Permanent link">&para;</a></h4>
<p>Define el protocolo <code>Figura</code> que contiene:</p>
<ul>
<li>Propiedad de lectura y escritura <code>centro</code> (<code>Punto</code>), que define el
  centro de la figura.</li>
<li>Propiedades de sólo lectura <code>area</code> (<code>Double</code>) y <code>tamaño</code> (<code>Tamaño</code>)
  que devuelven el tamaño (alto y ancho) de la figura.</li>
</ul>
<h4 id="3-define-extensiones">3. Define extensiones<a class="headerlink" href="#3-define-extensiones" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Define las extensiones necesarias para que las clases <code>Rectangulo</code>,
y <code>Circulo</code> se ajusten al protocolo <code>Figura</code>, añadiendo el
código de implementación necesario.</p>
</li>
<li>
<p>Añade mediante una extensión al protocolo <code>Figura</code> la propiedad
  calculada <code>descripcion</code> que devuelva un <code>String</code> con el centro y el
  área de la figura.</p>
</li>
<li>
<p>Prueba el código escrito hasta ahora, creando un array del tipo
  <code>Figura</code> (el protocolo) y añadiendo en él círculos y rectángulos.</p>
</li>
</ul>
<h4 id="4-estructura-almacenfiguras">4. Estructura <code>AlmacenFiguras</code><a class="headerlink" href="#4-estructura-almacenfiguras" title="Permanent link">&para;</a></h4>
<p>Por último, implementa una estructura <code>AlmacenFiguras</code>.</p>
<ul>
<li>
<p>Debe tener una única propiedad <code>figuras</code> que contenga un array de
figuras. Como en la práctica anterior, define en ella el método
<code>añade(figura:)</code> y las propiedades calculadas <code>numFiguras</code> (<code>Int</code>) y
<code>areaTotal</code> (<code>Double</code>).</p>
</li>
<li>
<p>Escribe el método <code>cuentaTipos() -&gt; (Int, Int)</code> que recorra el array
de figuras y devuelva una tupla con dos enteros: número de rectángulos
y número de círculos. La función debe imprimir por cada figura del
array, su descripción por defecto proporcionada por el protocolo y el
tipo de figura y sus características específicas.</p>
</li>
</ul>
<p>Por ejemplo:</p>
<div class="highlight"><pre><span></span><code>- Descripción de la figura: Una figura con centro Punto(x: 7.0, y: 3.5) y área 50.0
  Rectangulo con origen Punto(x: 2.0, y: 1.0) y tamaño Tamaño(ancho: 10.0, alto: 5.0)
- Descripción de la figura: Una figura con centro Punto(x: 0.0, y: 2.0) y área 78.5398163397448
  Circulo con centro Punto(x: 0.0, y: 2.0) y radio 5.0
</code></pre></div>
<ul>
<li>Escribe un ejemplo de código en el que se guarden varias figuras
en un almacén de figuras y se llame a sus métodos.</li>
</ul>
<hr />
<p>Lenguajes y Paradigmas de Programación, curso 2020-21<br />
© Departamento Ciencia de la Computación e Inteligencia Artificial, Universidad de Alicante<br />
Domingo Gallardo, Cristina Pomares, Antonio Botía, Francisco Martínez</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copiar al portapapeles", "clipboard.copied": "Copiado al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "B\u00fasqueda", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.term.missing": "Falta"}, "search": "../../assets/javascripts/workers/search.d351de03.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.a1609d9a.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>